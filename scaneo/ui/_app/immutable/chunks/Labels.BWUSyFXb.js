import{a as L,t as $}from"./disclose-version.hHXjza9X.js";import{e as p,g as t,b as a,p as Q,u as V,t as N,a as W,c as n,s as _,r as o}from"./runtime.B40kIuYm.js";import{s as X}from"./render.CM3wPBfR.js";import{i as Y}from"./if.BU02RLSO.js";import{e as Z,i as ee}from"./each.DvJ5DvNT.js";import{r as R,a as te}from"./attributes.faLUl4vZ.js";import{s as re}from"./class.ysGxxhcu.js";import{d as ae,e as se}from"./events.DTvxUH_b.js";import{b as S}from"./input.CHcNizJA.js";import{s as le,a as oe,p as ne}from"./stores.Bp1jUs6P.js";import{p as b}from"./proxy.B3-__M_J.js";import{f as A,P as I}from"./fetcher.BMDzGJ_8.js";import{P as ce,D as ie}from"./DeleteOutline.CIoqQZFN.js";const de=async e=>{const r=`${I}/labels/${e}`;return A(r)},ue=async(e,r,c)=>{const d=`${I}/labels`;return A(d,"POST",{name:e,color:r,campaign:c})},fe=async e=>{const r=`${I}/labels/${e}`;return A(r,"DELETE")};function be(){let e=p(b([])),r=p(!0),c=p(null),d=p(null);return{get data(){return t(e)},get loading(){return t(r)},get error(){return t(c)},get current(){return t(d)},set current(s){a(d,b(s))},retrieve:async s=>{a(r,!0);const{data:i,error:u}=await de(s);u&&a(c,b(u.message)),a(e,b(i)),a(r,!1)},create:async(s,i,u)=>{const{data:g,error:x}=await ue(s,i,u);if(x)throw new Error(x);return a(e,b([g,...t(e)])),g},delete:s=>{a(e,b(t(e).filter(i=>i.id!==s))),fe(s)},reset:()=>{a(e,b([])),a(r,!0),a(c,null),a(d,null)}}}const v=be();var ve=$('<p class="italic">No labels found</p>'),pe=(e,r,c)=>r(t(c).name),me=(e,r,c)=>r(t(c).id),_e=$('<tr><td class="w-8"><div class="w-4 h-4 ml-2 rounded-full"></div></td><td><button class="w-full px-2 text-left"> </button></td><td class="w-8"><button class="px-2 hover:text-red-600"><!></button></td></tr>'),ge=$('<div class="flex flex-col flex-1 h-full overflow-auto"><table class="w-full"></table></div>'),xe=$('<section class="flex flex-col flex-1 h-full gap-2 mt-2"><form class="flex"><input type="text" placeholder="new label" required class="rounded-r-none input input-sm border border-1"> <button type="submit" class="rounded-none btn btn-primary btn-sm"><!></button> <div class="box-border flex w-24 rounded-tr-lg rounded-br-lg"><input class="box-border h-full p-0 m-0 rounded-tr-lg rounded-br-lg" type="color"></div></form> <div class="flex flex-col flex-1 h-full"><!></div></section>');function Oe(e,r){Q(r,!0);const c=le(),d=()=>oe(ne,"$page",c);V(async()=>{v.retrieve(d().url.searchParams.get("id"))});let s=p("#000000"),i=p(""),u=p(!1);const g=async l=>{if(l.preventDefault(),a(u,!0),t(i)){try{await v.create(t(i),t(s),d().url.searchParams.get("id")),a(i,"")}catch(f){alert(f.message)}a(u,!1)}},x=async l=>{v.current=l},j=async l=>{confirm("Are you sure you want to delete this label? This action is irreversible and will delete all the associated annotations.")&&v.delete(l)};var P=xe(),h=n(P),k=n(h);R(k);var y=_(k,2),F=n(y);ce(F,{size:"15"}),o(y);var O=_(y,2),U=n(O);R(U),o(O),o(h);var q=_(h,2),G=n(q);Y(G,()=>v.data.length==0,l=>{var f=ve();L(l,f)},l=>{var f=ge(),B=n(f);Z(B,21,()=>v.data,ee,(H,m)=>{var w=_e(),D=n(w),J=n(D);o(D);var E=_(D),T=n(E);T.__click=[pe,x,m];var K=n(T);o(T),o(E);var C=_(E),z=n(C);z.__click=[me,j,m];var M=n(z);ie(M,{size:"15"}),o(z),o(C),o(w),N(()=>{re(w,`h-8 hover:bg-slate-100 ${(v.current==t(m).name?"bg-slate-50":"")??""}`),te(J,"style",`background-color: ${t(m).color??""};`),X(K,t(m).name)}),L(H,w)}),o(B),o(f),L(l,f)}),o(q),o(P),N(()=>y.disabled=t(u)),se("submit",h,g),S(k,()=>t(i),l=>a(i,l)),S(U,()=>t(s),l=>a(s,l)),L(e,P),W()}ae(["click"]);export{Oe as L,v as l};
