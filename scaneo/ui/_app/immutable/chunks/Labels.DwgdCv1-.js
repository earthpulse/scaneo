import{d as R,e as V,a as L,t as $}from"./disclose-version.BmQdNnQs.js";import{e as v,g as t,b as a,p as W,u as X,t as B,a as Y,c as n,s as _,r as o}from"./runtime.DxIuT8bo.js";import{s as Z}from"./render.DvgmjyIU.js";import{i as ee}from"./if.CylRvQJX.js";import{e as te,i as re}from"./each.4pS6kvS6.js";import{r as C,s as ae}from"./attributes.DoQyPotG.js";import{s as se}from"./class.CFsCnGgX.js";import{b as F}from"./input.Bjo9v0tX.js";import{s as le,a as oe,p as ne}from"./stores.Brgn634O.js";import{p as b}from"./proxy.DqozBE76.js";import{b as O,f as q}from"./fetcher.DqgCpJxC.js";import{P as ce,D as ie}from"./DeleteOutline.B6H577wE.js";const ue=async e=>{const r=`${O.api_url}/labels/${e}`;return q(r)},de=async(e,r,c)=>{const u=`${O.api_url}/labels`;return q(u,"POST",{name:e,color:r,campaign:c})},fe=async e=>{const r=`${O.api_url}/labels/${e}`;return q(r,"DELETE")};function be(){let e=v(b([])),r=v(!0),c=v(null),u=v(null);return{get data(){return t(e)},get loading(){return t(r)},get error(){return t(c)},get current(){return t(u)},set current(s){a(u,b(s))},retrieve:async s=>{a(r,!0);const{data:i,error:d}=await ue(s);d&&a(c,b(d.message)),a(e,b(i)),a(r,!1)},create:async(s,i,d)=>{const{data:g,error:x}=await de(s,i,d);if(x)throw new Error(x);return a(e,b([g,...t(e)])),g},delete:s=>{a(e,b(t(e).filter(i=>i.id!==s))),fe(s)},reset:()=>{a(e,b([])),a(r,!0),a(c,null),a(u,null)}}}const p=be();var pe=$('<p class="italic">No labels found</p>'),ve=(e,r,c)=>r(t(c).name),me=(e,r,c)=>r(t(c).id),_e=$('<tr><td class="w-8"><div class="w-4 h-4 ml-2 rounded-full"></div></td><td><button class="w-full px-2 text-left"> </button></td><td class="w-8"><button class="px-2 hover:text-red-600"><!></button></td></tr>'),ge=$('<div class="flex flex-col flex-1 h-full overflow-auto"><table class="w-full"></table></div>'),xe=$('<section class="flex flex-col flex-1 h-full gap-2 mt-2"><form class="flex"><input type="text" placeholder="new label" required class="rounded-r-none input input-sm border border-1"> <button type="submit" class="rounded-none btn btn-primary btn-sm"><!></button> <div class="box-border flex w-24 rounded-tr-lg rounded-br-lg"><input class="box-border h-full p-0 m-0 rounded-tr-lg rounded-br-lg" type="color"></div></form> <div class="flex flex-col flex-1 h-full"><!></div></section>');function qe(e,r){W(r,!0);const c=le(),u=()=>oe(ne,"$page",c);X(async()=>{p.retrieve(u().url.searchParams.get("id"))});let s=v("#000000"),i=v(""),d=v(!1);const g=async l=>{if(l.preventDefault(),a(d,!0),t(i)){try{await p.create(t(i),t(s),u().url.searchParams.get("id")),a(i,"")}catch(f){alert(f.message)}a(d,!1)}},x=async l=>{p.current=l},G=async l=>{confirm("Are you sure you want to delete this label? This action is irreversible and will delete all the associated annotations.")&&p.delete(l)};var k=xe(),h=n(k),P=n(h);C(P);var y=_(P,2),H=n(y);ce(H,{size:"15"}),o(y);var A=_(y,2),N=n(A);C(N),o(A),o(h);var S=_(h,2),I=n(S);ee(I,()=>p.data.length==0,l=>{var f=pe();L(l,f)},l=>{var f=ge(),U=n(f);te(U,21,()=>p.data,re,(J,m)=>{var w=_e(),D=n(w),K=n(D);o(D);var E=_(D),T=n(E);T.__click=[ve,x,m];var M=n(T);o(T),o(E);var j=_(E),z=n(j);z.__click=[me,G,m];var Q=n(z);ie(Q,{size:"15"}),o(z),o(j),o(w),B(()=>{se(w,`h-8 hover:bg-slate-100 ${(p.current==t(m).name?"bg-slate-50":"")??""}`),ae(K,"style",`background-color: ${t(m).color??""};`),Z(M,t(m).name)}),L(J,w)}),o(U),o(f),L(l,f)}),o(S),o(k),B(()=>y.disabled=t(d)),V("submit",h,g),F(P,()=>t(i),l=>a(i,l)),F(N,()=>t(s),l=>a(s,l)),L(e,k),Y()}R(["click"]);export{qe as L,p as l};
