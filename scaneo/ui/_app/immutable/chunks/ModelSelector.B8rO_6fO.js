import{c as lt,a as v,t as m}from"./disclose-version.DymP2m3X.js";import{p as st,e as U,u as A,f as ot,a as it,b as O,g as t,s as n,c as s,r,t as B}from"./runtime.cJOh_ioU.js";import{s as E}from"./render.Gnl0czpM.js";import{i as S}from"./if.Bhj5v8Zz.js";import{e as F,i as G}from"./each.4KclU_0W.js";import{r as nt}from"./attributes.CayNqfGD.js";import{d as dt}from"./events.BOQTMbzA.js";import{b as ct}from"./input.CvnAJZ7U.js";import{D as vt,b as pt}from"./DeleteOutline.hmBvqWE8.js";import{p as H}from"./props.B7tyearX.js";import{p as D}from"./proxy.D4aqs5o-.js";import{m as y}from"./models.svelte.ChP3fjK-.js";function ft(p,l,e,L,P){var o=p.__attributes??(p.__attributes={}),i=p.style,k="style-"+l;o[k]===e&&!P||(o[k]=e,e==null?i.removeProperty(l):i.setProperty(l,e,""))}var ut=m("<option> </option>"),bt=(p,l,e)=>l(t(e)),mt=m('<tr><td class="flex flex-row gap-2 items-center"><div class="w-4 h-4 rounded"></div> </td><td><input type="number" class="input input-bordered input-sm w-20" min="0"></td></tr>'),_t=m('<button class="btn btn-primary self-end w-[100px]">Save</button>'),gt=m('<div class="border-t border-gray-200 pt-3 mt-2 flex flex-col"><p class="text-sm italic text-gray-600 mb-2">Label mapper</p> <table class="table table-sm"><thead><tr><th>Label</th><th>Model Output Index</th></tr></thead><tbody></tbody></table> <!></div>'),xt=m('<li class="flex flex-col items-left gap-2 p-4 border border-gray-200 rounded-lg"><div class="flex items-center gap-2"><button class="btn btn-ghost btn-xs"><!></button> <span class="font-medium"> </span></div> <!></li>'),ht=m('<ul class="mt-2 flex flex-col gap-2"></ul>'),yt=m('<div class="form-control"><label class="label font-medium mb-1">Select Models (optional)</label> <select class="select select-bordered w-full"><option disabled selected>Choose a model</option><!></select> <!></div>');function qt(p,l){st(l,!0);let e=H(l,"labelMappings",31,()=>D({})),L=H(l,"onclick",3,()=>{}),P=H(l,"ondelete",3,()=>{}),o=U(""),i=U(D([]));A(()=>{y.retrieve()}),A(()=>{var a;Object.keys(e()).length>0&&O(i,D(((a=y.data)==null?void 0:a.filter(d=>e()[d.id]))||[]))}),A(()=>{if(t(o)){if(console.log(t(o)),t(i).find(a=>a.id===t(o)))return;t(i).push(y.data.find(a=>a.id===t(o))),e(e()[t(o)]=l.labels.reduce((a,d)=>(a[d.name]=0,a),{}),!0),O(o,""),e({...e()})}});const k=a=>{O(i,D(t(i).filter(d=>d.id!==a.id))),delete e()[a.id],e({...e()}),P()()};var J=lt(),V=ot(J);S(V,()=>{var a;return((a=y.data)==null?void 0:a.length)>0},a=>{var d=yt(),M=n(s(d),2),j=s(M);j.value=((j.__value="")==null,"");var W=n(j);F(W,17,()=>y.data,G,(g,c)=>{var f=ut(),u={},x=s(f);r(f),B(()=>{u!==(u=t(c).id)&&(f.value=(f.__value=t(c).id)==null?"":t(c).id),E(x,`${t(c).name??""} (task: ${t(c).task??""})`)}),v(g,f)}),r(M);var X=n(M,2);S(X,()=>t(i).length>0,g=>{var c=ht();F(c,21,()=>t(i),G,(f,u)=>{var x=xt(),z=s(x),w=s(z);w.__click=[bt,k,u];var Y=s(w);vt(Y,{size:"15"}),r(w);var K=n(w,2),Z=s(K);r(K),r(z);var $=n(z,2);S($,()=>l.labels,tt=>{var C=gt(),I=n(s(C),2),N=n(s(I));F(N,21,()=>l.labels,G,(q,b)=>{var h=mt(),_=s(h),Q=s(_),at=n(Q);r(_);var R=n(_),T=s(R);nt(T),r(R),r(h),B(()=>{ft(Q,"background-color",t(b).color),E(at,` ${t(b).name??""}`)}),ct(T,()=>e()[t(u).id][t(b).name],rt=>e(e()[t(u).id][t(b).name]=rt,!0)),v(q,h)}),r(N),r(I);var et=n(I,2);S(et,L,q=>{var b=_t();b.__click=function(...h){var _;(_=L())==null||_.apply(this,h)},v(q,b)}),r(C),v(tt,C)}),r(x),B(()=>E(Z,t(u).name)),v(f,x)}),r(c),v(g,c)}),r(d),pt(M,()=>t(o),g=>O(o,g)),v(a,d)}),v(p,J),it()}dt(["click"]);export{qt as M,ft as s};
