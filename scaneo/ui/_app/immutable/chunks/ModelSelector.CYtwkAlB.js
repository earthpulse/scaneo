import{d as lt,c as st,a as v,t as _}from"./disclose-version.BmQdNnQs.js";import{p as ot,e as U,u as A,f as it,a as nt,b as O,g as t,s as n,c as s,r,t as B}from"./runtime.DxIuT8bo.js";import{s as E}from"./render.DvgmjyIU.js";import{i as S}from"./if.CylRvQJX.js";import{e as F,i as G}from"./each.4pS6kvS6.js";import{r as dt}from"./attributes.DoQyPotG.js";import{b as ct}from"./input.Bjo9v0tX.js";import{D as vt,b as pt}from"./DeleteOutline.B6H577wE.js";import{p as H}from"./props.DAkrzDwa.js";import{p as D}from"./proxy.DqozBE76.js";import{m as y}from"./models.svelte.CRDofqan.js";function ut(p,l,e,L,P){var o=p.__attributes??(p.__attributes={}),i=p.style,k="style-"+l;o[k]===e&&!P||(o[k]=e,e==null?i.removeProperty(l):i.setProperty(l,e,""))}var ft=_("<option> </option>"),bt=(p,l,e)=>l(t(e)),_t=_('<tr><td class="flex flex-row gap-2 items-center"><div class="w-4 h-4 rounded"></div> </td><td><input type="number" class="input input-bordered input-sm w-20" min="0"></td></tr>'),mt=_('<button class="btn btn-primary self-end w-[100px]">Save</button>'),gt=_('<div class="border-t border-gray-200 pt-3 mt-2 flex flex-col"><p class="text-sm italic text-gray-600 mb-2">Label mapper</p> <table class="table table-sm"><thead><tr><th>Label</th><th>Model Output Index</th></tr></thead><tbody></tbody></table> <!></div>'),xt=_('<li class="flex flex-col items-left gap-2 p-4 border border-gray-200 rounded-lg"><div class="flex items-center gap-2"><button class="btn btn-ghost btn-xs"><!></button> <span class="font-medium"> </span></div> <!></li>'),ht=_('<ul class="mt-2 flex flex-col gap-2"></ul>'),yt=_('<div class="form-control"><label class="label font-medium mb-1">Select Models (optional)</label> <select class="select select-bordered w-full"><option disabled selected>Choose a model</option><!></select> <!></div>');function It(p,l){ot(l,!0);let e=H(l,"labelMappings",31,()=>D({})),L=H(l,"onclick",3,()=>{}),P=H(l,"ondelete",3,()=>{}),o=U(""),i=U(D([]));A(()=>{y.retrieve()}),A(()=>{var a;Object.keys(e()).length>0&&O(i,D(((a=y.data)==null?void 0:a.filter(d=>e()[d.id]))||[]))}),A(()=>{if(t(o)){if(console.log(t(o)),t(i).find(a=>a.id===t(o)))return;t(i).push(y.data.find(a=>a.id===t(o))),e(e()[t(o)]=l.labels.reduce((a,d)=>(a[d.name]=0,a),{}),!0),O(o,""),e({...e()})}});const k=a=>{O(i,D(t(i).filter(d=>d.id!==a.id))),delete e()[a.id],e({...e()}),P()()};var J=st(),V=it(J);S(V,()=>{var a;return((a=y.data)==null?void 0:a.length)>0},a=>{var d=yt(),M=n(s(d),2),j=s(M);j.value=((j.__value="")==null,"");var W=n(j);F(W,17,()=>y.data,G,(g,c)=>{var u=ft(),f={},x=s(u);r(u),B(()=>{f!==(f=t(c).id)&&(u.value=(u.__value=t(c).id)==null?"":t(c).id),E(x,`${t(c).name??""} (task: ${t(c).task??""})`)}),v(g,u)}),r(M);var X=n(M,2);S(X,()=>t(i).length>0,g=>{var c=ht();F(c,21,()=>t(i),G,(u,f)=>{var x=xt(),z=s(x),w=s(z);w.__click=[bt,k,f];var Y=s(w);vt(Y,{size:"15"}),r(w);var K=n(w,2),Z=s(K);r(K),r(z);var $=n(z,2);S($,()=>l.labels,tt=>{var C=gt(),I=n(s(C),2),N=n(s(I));F(N,21,()=>l.labels,G,(q,b)=>{var h=_t(),m=s(h),Q=s(m),at=n(Q);r(m);var R=n(m),T=s(R);dt(T),r(R),r(h),B(()=>{ut(Q,"background-color",t(b).color),E(at,` ${t(b).name??""}`)}),ct(T,()=>e()[t(f).id][t(b).name],rt=>e(e()[t(f).id][t(b).name]=rt,!0)),v(q,h)}),r(N),r(I);var et=n(I,2);S(et,L,q=>{var b=mt();b.__click=function(...h){var m;(m=L())==null||m.apply(this,h)},v(q,b)}),r(C),v(tt,C)}),r(x),B(()=>E(Z,t(f).name)),v(u,x)}),r(c),v(g,c)}),r(d),pt(M,()=>t(o),g=>O(o,g)),v(a,d)}),v(p,J),nt()}lt(["click"]);export{It as M,ut as s};
