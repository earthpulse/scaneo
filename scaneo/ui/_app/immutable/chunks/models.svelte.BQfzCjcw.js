import{p as u}from"./proxy.B3-__M_J.js";import{e as y,g as l,b as c}from"./runtime.B40kIuYm.js";import{b as i,f}from"./fetcher.CybOVi2G.js";async function w(r){let e=`${i.url}/_models`;return r&&(e+=`?campaign=${r}`),f(e)}async function b(r){const e=`${i.url}/_models/${r}`;return f(e)}const p=async(r,e,a,d,n,o)=>{const t=`${i.url}/_models`;return f(t,"POST",{name:r,description:e,url:a,task:d,preprocessing:n,postprocessing:o})},M=async r=>{const e=`${i.url}/_models/${r}`;return f(e,"DELETE")},v=async(r,e)=>{console.log(r,e);const a=`${i.url}/_models/inference/${r}`;return f(a,"POST",{image:e})};function E(){let r=y(u([])),e=y(!0),a=y(null),d=y(null);return{get data(){return l(r)},get loading(){return l(e)},get error(){return l(a)},get current(){return l(d)},retrieve:async(n=null)=>{c(e,!0);const{data:o,error:t}=await w(n);t&&c(a,u(t.message)),c(r,u(o)),c(e,!1)},create:async(n,o,t,s,g,$)=>{const{data:m,error:_}=await p(n,o,t,s,g,$);if(_)throw _;return c(r,u([m,...l(r)])),m},delete:async n=>{const{data:o,error:t}=await M(n);t&&console.error(t),c(r,u(l(r).filter(s=>s.id!==n)))},retrieveOne:async n=>{const{data:o,error:t}=await b(n);t&&console.error(l(a)),c(d,u(o))},inference:async(n,o)=>{const{data:t,error:s}=await v(n,o);if(s)throw new Error(s);return t}}}const x=E();export{x as m};
