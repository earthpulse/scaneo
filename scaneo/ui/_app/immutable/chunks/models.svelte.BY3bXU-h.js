import{p as u}from"./proxy.D4aqs5o-.js";import{e as _,g as l,b as c}from"./runtime.cJOh_ioU.js";import{b as d,f}from"./fetcher.C3wkiN9W.js";async function $(r){let e=`${d.api_url}/_models`;return r&&(e+=`?campaign=${r}`),f(e)}async function w(r){const e=`${d.api_url}/_models/${r}`;return f(e)}const b=async(r,e,o,i,a,n)=>{const t=`${d.api_url}/_models`;return f(t,"POST",{name:r,description:e,url:o,task:i,preprocessing:a,postprocessing:n})},M=async r=>{const e=`${d.api_url}/_models/${r}`;return f(e,"DELETE")},v=async(r,e)=>{console.log(r,e);const o=`${d.api_url}/_models/inference/${r}`;return f(o,"POST",{image:e})};function E(){let r=_(u([])),e=_(!0),o=_(null),i=_(null);return{get data(){return l(r)},get loading(){return l(e)},get error(){return l(o)},get current(){return l(i)},retrieve:async(a=null)=>{c(e,!0);const{data:n,error:t}=await $(a);t&&c(o,u(t.message)),c(r,u(n)),c(e,!1)},create:async(a,n,t,s,p,g)=>{const{data:y,error:m}=await b(a,n,t,s,p,g);if(m)throw m;return c(r,u([y,...l(r)])),y},delete:async a=>{const{data:n,error:t}=await M(a);t&&console.error(t),c(r,u(l(r).filter(s=>s.id!==a)))},retrieveOne:async a=>{const{data:n,error:t}=await w(a);t&&console.error(l(o)),c(i,u(n))},inference:async(a,n)=>{const{data:t,error:s}=await v(a,n);if(s)throw new Error(s);return t}}}const x=E();export{x as m};
