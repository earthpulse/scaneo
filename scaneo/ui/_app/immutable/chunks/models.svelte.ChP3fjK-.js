import{p as c}from"./proxy.D4aqs5o-.js";import{e as y,g as u,b as o}from"./runtime.cJOh_ioU.js";import{b as d,f}from"./fetcher.C3wkiN9W.js";async function $(r){let e=`${d.api_url}/_models`;return r&&(e+=`?campaign=${r}`),f(e)}async function w(r){const e=`${d.api_url}/_models/${r}`;return f(e)}const b=async(r,e,s,i,t,n)=>{const a=`${d.api_url}/_models`;return f(a,"POST",{name:r,description:e,url:s,task:i,preprocessing:t,postprocessing:n})},M=async r=>{const e=`${d.api_url}/_models/${r}`;return f(e,"DELETE")},v=async(r,e)=>{console.log(r,e);const s=`${d.api_url}/_models/inference/${r}`;return f(s,"POST",{image:e})};function E(){let r=y(c([])),e=y(!0),s=y(null),i=y(null);return{get data(){return u(r)},get loading(){return u(e)},get error(){return u(s)},get current(){return u(i)},retrieve:async(t=null)=>{o(e,!0);const{data:n,error:a}=await $(t);a&&o(s,c(a.message)),o(r,c(n)),o(e,!1)},create:async(t,n,a,l,p,g)=>{const{data:_,error:m}=await b(t,n,a,l,p,g);if(m)throw m;return o(r,c([_,...u(r)])),_},delete:async t=>{const{data:n,error:a}=await M(t);a&&console.error(a),o(r,c(u(r).filter(l=>l.id!==t)))},retrieveOne:async t=>{const{data:n,error:a}=await w(t);a&&console.error(u(s)),o(i,c(n))},setCurrent:async t=>{o(i,c(t))},inference:async(t,n)=>{const{data:a,error:l}=await v(t,n);if(l)throw new Error(l);return a}}}const x=E();export{x as m};
