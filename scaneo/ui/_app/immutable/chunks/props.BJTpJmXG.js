import{n as w,o as B,L as C,P as F,q as y,g as _,b as N,B as x,R as U,v as A,w as Y,x as z,y as M,j as $,d as D,z as j,A as G,D as H,C as b,E as V,F as Z}from"./runtime.B40kIuYm.js";import{p as J}from"./proxy.B3-__M_J.js";function T(a){for(var r=b,n=b;r!==null&&!(r.f&(x|U));)r=r.parent;try{return A(r),a()}finally{A(n)}}function W(a,r,n,v){var h;var I=(n&Y)!==0,l=(n&z)!==0,L=(n&M)!==0,g=(n&V)!==0,d=a[r],i=(h=w(a,r))==null?void 0:h.set,t=v,c=!0,o=!1,m=()=>(o=!0,c&&(c=!1,g?t=$(v):t=v),t);d===void 0&&v!==void 0&&(i&&l&&B(),d=m(),i&&i(d));var u;if(l)u=()=>{var e=a[r];return e===void 0?m():(c=!0,o=!1,e)};else{var p=T(()=>(I?D:j)(()=>a[r]));p.f|=C,u=()=>{var e=_(p);return e!==void 0&&(t=void 0),e===void 0?t:e}}if(!(n&F))return u;if(i){var q=a.$$legacy;return function(e,f){return arguments.length>0?((!l||!f||q)&&i(f?u():e),e):u()}}var E=!1,O=!1,P=Z(d),s=T(()=>D(()=>{var e=u(),f=_(P),R=G;return E||e===void 0&&R.f&H?(E=!1,O=!0,f):(O=!1,P.v=e)}));return I||(s.equals=y),function(e,f){var R=_(s);if(arguments.length>0){const S=f?_(s):l&&L?J(e):e;return s.equals(S)||(E=!0,N(P,S),o&&t!==void 0&&(t=S),_(s)),e}return R}}export{W as p};
