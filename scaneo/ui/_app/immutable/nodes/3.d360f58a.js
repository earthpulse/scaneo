import{M as Q,S as P,i as B,s as N,k,l as C,m as v,h as g,n as d,b as w,I as S,g as p,v as X,d as y,f as Y,G as R,o as We,N as we,O as Un,C as lt,D as ot,E as at,F as ct,P as Wn,y as M,a as O,z as D,c as H,A,B as T,Q as J,e as j,R as K,H as _,q as W,r as Z,u as te,t as ut,T as ve,U as x,V as Le,J as ft,W as dn,p as U,X as Ze,Y as Qe,Z as mt,x as de,_ as It,$ as Ae,w as hn,a0 as Zn,a1 as Ve,K as Qn,a2 as St,a3 as Jn,a4 as Kn,a5 as gn,a6 as Xn}from"../chunks/index.a81f82fa.js";import{_ as qe}from"../chunks/preload-helper.a4192956.js";import{w as se,j as Yn}from"../chunks/singletons.7f807eb5.js";import{p as xn}from"../chunks/stores.6232b1cd.js";import{f as Mt,a as At,b as $n,g as er,c as tr,u as Be,d as Ne,e as nr,o as ae,h as Tt,i as rr,p as sr,j as ir,k as lr,s as or,l as ar,m as bn,n as _n,q as cr,t as Pt,v as pn,w as ur,x as fr,y as ge,z as mr,A as dr,B as hr,C as gr,D as br,E as _r}from"../chunks/optionsStore.a9a632fb.js";const pr={water:"#0084ff",vegetation:"#02921a",crops:"#eeff00","bare soil":"#ff0000",forest:"#177733",river:"#00ddff",highway:"#7f7f7f",industrial:"#ffb600",residential:"#ff00fa",pasture:"#9aff42"};function vr(){const r=se(yr),{subscribe:e,update:t}=r;return{subscribe:e,retrieve:()=>Q(r),add:l=>{let o=l.color||pr[l.name.toLowerCase()];if(!o)do o=wr();while(Q(r).some(c=>c.color===o));const a={...l,color:o};t(c=>[...c,a])},removeBy:l=>{t(o=>o.filter(a=>a.name!==l))},changeColor:l=>{t(o=>o.map(a=>a.name===l.name?l:a))}}}const yr=[],be=vr();function wr(){let r="";const e=/^#[0-9a-f]{6}$/i;do r="#"+Math.floor(Math.random()*16777215).toString(16);while(!e.test(r));return r}function Lr(){const r=se({}),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>Q(r)}}const ue=Lr();function kr(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){d(e,"class","blocker fixed block h-[100vh] w-[100vw] bg-white opacity-0 transition-opacity ease-in-out")},m(t,n){w(t,e,n)},p:S,i:S,o:S,d(t){t&&g(e)}}}class Cr extends P{constructor(e){super(),B(this,e,null,kr,N,{})}}function Er(r){const e=se(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>Q(e),remove:()=>n(null)}}const $=Er(null);function Bt(r){let e;const t=r[5].default,n=lt(t,r,r[4],null);return{c(){n&&n.c()},l(s){n&&n.l(s)},m(s,i){n&&n.m(s,i),e=!0},p(s,i){n&&n.p&&(!e||i&16)&&ot(n,t,s,s[4],e?ct(t,s[4],i,null):at(s[4]),null)},i(s){e||(p(n,s),e=!0)},o(s){y(n,s),e=!1},d(s){n&&n.d(s)}}}function Ir(r){let e,t,n=r[0]&&Bt(r);return{c(){e=k("div"),n&&n.c(),this.h()},l(s){e=C(s,"DIV",{id:!0,class:!0});var i=v(e);n&&n.l(i),i.forEach(g),this.h()},h(){d(e,"id","map"),d(e,"class","svelte-xoi8de")},m(s,i){w(s,e,i),n&&n.m(e,null),t=!0},p(s,[i]){s[0]?n?(n.p(s,i),i&1&&p(n,1)):(n=Bt(s),n.c(),p(n,1),n.m(e,null)):n&&(X(),y(n,1,1,()=>{n=null}),Y())},i(s){t||(p(n),t=!0)},o(s){y(n),t=!1},d(s){s&&g(e),n&&n.d()}}}let Sr=12;function Mr(r,e,t){let n;R(r,$,f=>t(0,n=f));let{$$slots:s={},$$scope:i}=e,{options:l={attributionControl:!1,drawControls:!0,max_zoom:20}}=e,{zoomPosition:o="bottomright"}=e,{panes:a=[{name:"default",zIndex:200},{name:"sam",zIndex:400}]}=e,c=[42.0407,3.1],u;return We(async()=>{if(!u){const f=await qe(()=>import("../chunks/leaflet-src.e35a4304.js").then(m=>m.l),[],import.meta.url),{Icon:h}=f;h.Default.imagePath="./",await qe(()=>import("../chunks/leaflet.draw.b0487800.js"),[],import.meta.url),await qe(()=>import("../chunks/leaflet.activearea.bef5e9d0.js"),[],import.meta.url),window.type=!0,u=f.map("map",l).setActiveArea("map-viewport").setView(c,Sr),u.zoomControl.setPosition(o),a==null||a.forEach(({name:m,zIndex:b})=>{u.createPane(m),u.getPane(m).style.zIndex=b,u.getPane(m).style.pointerEvents="none"}),$.store(u)}}),we(()=>{$.remove()}),Un("map",{getMap:()=>u}),r.$$set=f=>{"options"in f&&t(1,l=f.options),"zoomPosition"in f&&t(2,o=f.zoomPosition),"panes"in f&&t(3,a=f.panes),"$$scope"in f&&t(4,i=f.$$scope)},[n,l,o,a,i,s]}let Ar=class extends P{constructor(e){super(),B(this,e,Mr,Ir,N,{options:1,zoomPosition:2,panes:3})}};function Tr(r,e,t){let{url:n}=e,{options:s}=e;const{getMap:i}=Wn("map");let l=null;return We(()=>{const o=i();l=L.tileLayer(n,s).addTo(o)}),we(()=>{l.remove()}),r.$$set=o=>{"url"in o&&t(0,n=o.url),"options"in o&&t(1,s=o.options)},[n,s]}class Pr extends P{constructor(e){super(),B(this,e,Tr,null,N,{url:0,options:1})}}function Br(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){d(e,"class","map-viewport")},m(t,n){w(t,e,n)},p:S,i:S,o:S,d(t){t&&g(e)}}}class Nr extends P{constructor(e){super(),B(this,e,null,Br,N,{})}}function Dr(r){let e,t;return e=new Pr({props:{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:20,zIndex:1}}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:S,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function Or(r){let e,t,n,s,i;return e=new Nr({}),s=new Ar({props:{$$slots:{default:[Dr]},$$scope:{ctx:r}}}),{c(){M(e.$$.fragment),t=O(),n=k("section"),M(s.$$.fragment),this.h()},l(l){D(e.$$.fragment,l),t=H(l),n=C(l,"SECTION",{class:!0});var o=v(n);D(s.$$.fragment,o),o.forEach(g),this.h()},h(){d(n,"class","w-full h-full")},m(l,o){A(e,l,o),w(l,t,o),w(l,n,o),A(s,n,null),i=!0},p(l,[o]){const a={};o&1&&(a.$$scope={dirty:o,ctx:l}),s.$set(a)},i(l){i||(p(e.$$.fragment,l),p(s.$$.fragment,l),i=!0)},o(l){y(e.$$.fragment,l),y(s.$$.fragment,l),i=!1},d(l){T(e,l),l&&g(t),l&&g(n),T(s)}}}class Hr extends P{constructor(e){super(),B(this,e,null,Or,N,{})}}var le=(r=>(r.detection="detection",r.segmentation="segmentation",r.classification="classification",r.prompts="prompts",r))(le||{}),Je=(r=>(r.labels="labels",r.tasks="tasks",r))(Je||{});const zr=()=>{const r=se(Mt),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>Q(r),empty:()=>t(Mt)}},Ke=zr(),{tasks:jr}=Je;function Vr(r){const e=se(r),{subscribe:t,set:n}=e,s=u=>{const f={detection:L.featureGroup(),segmentation:L.featureGroup(),classification:L.featureGroup(),prompts:L.featureGroup()};At(u,f),n(f)},i=u=>{const f=Q(e);$n(u,f),n(null)};return{subscribe:t,init:s,remove:i,clear:u=>{i(u),s(u)},retrieve:()=>Q(e),addLayerWithProperties:(u,f,h)=>(f[jr]=[h],u.feature={type:"Feature",properties:{...f}},Q(e)[h].addLayer(u),u),resetLayerGroup:(u,f)=>{const h=Q(e);h[f].clearLayers(),At(u,h),n(h)},removeLayer:(u,f)=>{Q(e)[f].removeLayer(u)}}}const Rr={detection:null,segmentation:null,classification:null,prompts:null},ee=Vr(Rr);function qr(){const r=se(Nt),{subscribe:e,set:t}=r;return{subscribe:e,store:s=>t(s),toggle:s=>{const i=Q(r),l=i.map(a=>a.name);let o;l.includes(s.name)?o=i.filter(a=>a.name!==s.name):o=[...i,s],t(o)},retrieve:()=>Q(r),empty:()=>t(Nt)}}const Nt=[],ke=qr(),Fr=()=>{const r=se({areImagesLoading:!0,areLabelsLoading:!0,areAnnotationsLoading:!0}),{subscribe:e,update:t}=r;return{subscribe:e,markImagesAsLoaded:()=>t(u=>({...u,areImagesLoading:!1})),markLabelsAsLoaded:()=>t(u=>({...u,areLabelsLoading:!1})),markAnnotationsAsLoaded:()=>t(u=>({...u,areAnnotationsLoading:!1})),markLabelsAsLoading:()=>t(u=>({...u,areLabelsLoading:!0})),markImagesAsLoading:()=>t(u=>({...u,areImagesLoading:!0})),markAnnotationsAsLoading:()=>t(u=>({...u,areAnnotationsLoading:!0})),isDataLoading:()=>{const u=Q(r);return u.areImagesLoading||u.areLabelsLoading},retrieve:()=>Q(r)}},Te=Fr(),Gr=()=>{const e=se({saving:!1,samMaskRequest:!1}),{update:t,subscribe:n}=e;return{subscribe:n,saving:{enable:()=>t(s=>({...s,saving:!0})),disable:()=>t(s=>({...s,saving:!1})),retrieve:()=>Q(e).saving},samMaskRequest:{enable:()=>t(s=>({...s,samMaskRequest:!0})),disable:()=>t(s=>({...s,samMaskRequest:!1})),retrieve:()=>Q(e).samMaskRequest}}},ce=Gr(),Ur={name:"",bbox:[0,0,0,0]};function Wr(){const r=se(Ur),{subscribe:e,set:t}=r;return{subscribe:e,store:n=>t(n),retrieve:()=>Q(r)}}const _e=Wr();function Zr(r){const e=se(r),{subscribe:t,set:n}=e;return{subscribe:t,store:s=>n(s),retrieve:()=>Q(e)}}const Qr=[],Xe=Zr(Qr),Jr=()=>ke.retrieve().map(e=>e.name).flat(),vn=async()=>{const r=Jr(),e=_e.retrieve().bbox,t=er(e),n=tr(t),s=L.polygon(n,{weight:0,fillOpacity:0,interactive:!1}),i={labels:r};ee.addLayerWithProperties(s,i,le.classification)},Kr=r=>{_e.retrieve().name&&(ke.toggle(r),Xr())},Xr=()=>{ce.saving.enable(),Yr(),ke.retrieve().length&&vn()},Yr=()=>{ee.retrieve().classification&&ee.resetLayerGroup($.retrieve(),le.classification)};function Dt(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function Ot(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function xr(r){let e,t,n,s=r[7]&&Dt(r),i=r[6]&&Ot(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M21.41 11.58L12.41 2.58C12.04 2.21 11.53 2 11 2H4C2.9 2 2 2.9 2 4V11C2 11.53 2.21 12.04 2.59 12.41L3 12.81C3.9 12.27 4.94 12 6 12C9.31 12 12 14.69 12 18C12 19.06 11.72 20.09 11.18 21L11.58 21.4C11.95 21.78 12.47 22 13 22S14.04 21.79 14.41 21.41L21.41 14.41C21.79 14.04 22 13.53 22 13S21.79 11.96 21.41 11.58M5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7M8.63 14.27L4.76 18.17L3.41 16.8L2 18.22L4.75 21L10.03 15.68L8.63 14.27"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Dt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Ot(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function $r(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class es extends P{constructor(e){super(),B(this,e,$r,xr,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Ht(r){let e,t,n,s,i;return t=new es({props:{color:r[1]?"#202124":"#5e5e5e"}}),{c(){e=k("i"),M(t.$$.fragment),this.h()},l(l){e=C(l,"I",{class:!0,"aria-label":!0});var o=v(e);D(t.$$.fragment,o),o.forEach(g),this.h()},h(){d(e,"class",n="text-2xl "+(r[1]&&"hover:text-3xl")+" mr-2"),d(e,"aria-label",s=`${r[0]} classification tag`)},m(l,o){w(l,e,o),A(t,e,null),i=!0},p(l,o){const a={};o&2&&(a.color=l[1]?"#202124":"#5e5e5e"),t.$set(a),(!i||o&2&&n!==(n="text-2xl "+(l[1]&&"hover:text-3xl")+" mr-2"))&&d(e,"class",n),(!i||o&1&&s!==(s=`${l[0]} classification tag`))&&d(e,"aria-label",s)},i(l){i||(p(t.$$.fragment,l),i=!0)},o(l){y(t.$$.fragment,l),i=!1},d(l){l&&g(e),T(t)}}}function ts(r){let e=r[2].includes(r[0].toLowerCase()),t,n,s=e&&Ht(r);return{c(){s&&s.c(),t=j()},l(i){s&&s.l(i),t=j()},m(i,l){s&&s.m(i,l),w(i,t,l),n=!0},p(i,[l]){l&5&&(e=i[2].includes(i[0].toLowerCase())),e?s?(s.p(i,l),l&5&&p(s,1)):(s=Ht(i),s.c(),p(s,1),s.m(t.parentNode,t)):s&&(X(),y(s,1,1,()=>{s=null}),Y())},i(i){n||(p(s),n=!0)},o(i){y(s),n=!1},d(i){s&&s.d(i),i&&g(t)}}}function ns(r,e,t){let n,s,i,l;R(r,ye,a=>t(3,i=a)),R(r,ke,a=>t(4,l=a));let{name:o}=e;return r.$$set=a=>{"name"in a&&t(0,o=a.name)},r.$$.update=()=>{r.$$.dirty&16&&t(2,n=l.map(a=>a.name.toLowerCase())),r.$$.dirty&8&&t(1,s=i.name==="Classification")},[o,s,n,i,l]}class rs extends P{constructor(e){super(),B(this,e,ns,ts,N,{name:0})}}const yn=async()=>{const r=be.retrieve(),e=Be.retrieve();ss(r,e)},ss=async(r,e)=>{const t=await fetch(e+Ne.labelsEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({labels:r})}),n=await t.json();t.ok||alert(JSON.stringify(n.detail))},wn=()=>{const r=ee.retrieve(),{detection:e,segmentation:t,classification:n,prompts:s}=r;return L.layerGroup([e,t,n,s]).toGeoJSON()},dt=r=>{Ke.store(r)},is=r=>{const e=ue.retrieve().name;r===e&&ce.samMaskRequest.enable()},ht=r=>r.reduce((t,{name:n,color:s})=>(t[n]=s,t),{});var ls={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};const Pe=ls,Ln={};for(const r of Object.keys(Pe))Ln[Pe[r]]=r;const I={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};var kn=I;for(const r of Object.keys(I)){if(!("channels"in I[r]))throw new Error("missing channels property: "+r);if(!("labels"in I[r]))throw new Error("missing channel labels property: "+r);if(I[r].labels.length!==I[r].channels)throw new Error("channel and label counts mismatch: "+r);const{channels:e,labels:t}=I[r];delete I[r].channels,delete I[r].labels,Object.defineProperty(I[r],"channels",{value:e}),Object.defineProperty(I[r],"labels",{value:t})}I.rgb.hsl=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(e,t,n),i=Math.max(e,t,n),l=i-s;let o,a;i===s?o=0:e===i?o=(t-n)/l:t===i?o=2+(n-e)/l:n===i&&(o=4+(e-t)/l),o=Math.min(o*60,360),o<0&&(o+=360);const c=(s+i)/2;return i===s?a=0:c<=.5?a=l/(i+s):a=l/(2-i-s),[o,a*100,c*100]};I.rgb.hsv=function(r){let e,t,n,s,i;const l=r[0]/255,o=r[1]/255,a=r[2]/255,c=Math.max(l,o,a),u=c-Math.min(l,o,a),f=function(h){return(c-h)/6/u+1/2};return u===0?(s=0,i=0):(i=u/c,e=f(l),t=f(o),n=f(a),l===c?s=n-t:o===c?s=1/3+e-n:a===c&&(s=2/3+t-e),s<0?s+=1:s>1&&(s-=1)),[s*360,i*100,c*100]};I.rgb.hwb=function(r){const e=r[0],t=r[1];let n=r[2];const s=I.rgb.hsl(r)[0],i=1/255*Math.min(e,Math.min(t,n));return n=1-1/255*Math.max(e,Math.max(t,n)),[s,i*100,n*100]};I.rgb.cmyk=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.min(1-e,1-t,1-n),i=(1-e-s)/(1-s)||0,l=(1-t-s)/(1-s)||0,o=(1-n-s)/(1-s)||0;return[i*100,l*100,o*100,s*100]};function os(r,e){return(r[0]-e[0])**2+(r[1]-e[1])**2+(r[2]-e[2])**2}I.rgb.keyword=function(r){const e=Ln[r];if(e)return e;let t=1/0,n;for(const s of Object.keys(Pe)){const i=Pe[s],l=os(r,i);l<t&&(t=l,n=s)}return n};I.keyword.rgb=function(r){return Pe[r]};I.rgb.xyz=function(r){let e=r[0]/255,t=r[1]/255,n=r[2]/255;e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,n=n>.04045?((n+.055)/1.055)**2.4:n/12.92;const s=e*.4124+t*.3576+n*.1805,i=e*.2126+t*.7152+n*.0722,l=e*.0193+t*.1192+n*.9505;return[s*100,i*100,l*100]};I.rgb.lab=function(r){const e=I.rgb.xyz(r);let t=e[0],n=e[1],s=e[2];t/=95.047,n/=100,s/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,s=s>.008856?s**(1/3):7.787*s+16/116;const i=116*n-16,l=500*(t-n),o=200*(n-s);return[i,l,o]};I.hsl.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;let s,i,l;if(t===0)return l=n*255,[l,l,l];n<.5?s=n*(1+t):s=n+t-n*t;const o=2*n-s,a=[0,0,0];for(let c=0;c<3;c++)i=e+1/3*-(c-1),i<0&&i++,i>1&&i--,6*i<1?l=o+(s-o)*6*i:2*i<1?l=s:3*i<2?l=o+(s-o)*(2/3-i)*6:l=o,a[c]=l*255;return a};I.hsl.hsv=function(r){const e=r[0];let t=r[1]/100,n=r[2]/100,s=t;const i=Math.max(n,.01);n*=2,t*=n<=1?n:2-n,s*=i<=1?i:2-i;const l=(n+t)/2,o=n===0?2*s/(i+s):2*t/(n+t);return[e,o*100,l*100]};I.hsv.rgb=function(r){const e=r[0]/60,t=r[1]/100;let n=r[2]/100;const s=Math.floor(e)%6,i=e-Math.floor(e),l=255*n*(1-t),o=255*n*(1-t*i),a=255*n*(1-t*(1-i));switch(n*=255,s){case 0:return[n,a,l];case 1:return[o,n,l];case 2:return[l,n,a];case 3:return[l,o,n];case 4:return[a,l,n];case 5:return[n,l,o]}};I.hsv.hsl=function(r){const e=r[0],t=r[1]/100,n=r[2]/100,s=Math.max(n,.01);let i,l;l=(2-t)*n;const o=(2-t)*s;return i=t*s,i/=o<=1?o:2-o,i=i||0,l/=2,[e,i*100,l*100]};I.hwb.rgb=function(r){const e=r[0]/360;let t=r[1]/100,n=r[2]/100;const s=t+n;let i;s>1&&(t/=s,n/=s);const l=Math.floor(6*e),o=1-n;i=6*e-l,l&1&&(i=1-i);const a=t+i*(o-t);let c,u,f;switch(l){default:case 6:case 0:c=o,u=a,f=t;break;case 1:c=a,u=o,f=t;break;case 2:c=t,u=o,f=a;break;case 3:c=t,u=a,f=o;break;case 4:c=a,u=t,f=o;break;case 5:c=o,u=t,f=a;break}return[c*255,u*255,f*255]};I.cmyk.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100,s=r[3]/100,i=1-Math.min(1,e*(1-s)+s),l=1-Math.min(1,t*(1-s)+s),o=1-Math.min(1,n*(1-s)+s);return[i*255,l*255,o*255]};I.xyz.rgb=function(r){const e=r[0]/100,t=r[1]/100,n=r[2]/100;let s,i,l;return s=e*3.2406+t*-1.5372+n*-.4986,i=e*-.9689+t*1.8758+n*.0415,l=e*.0557+t*-.204+n*1.057,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,i=i>.0031308?1.055*i**(1/2.4)-.055:i*12.92,l=l>.0031308?1.055*l**(1/2.4)-.055:l*12.92,s=Math.min(Math.max(0,s),1),i=Math.min(Math.max(0,i),1),l=Math.min(Math.max(0,l),1),[s*255,i*255,l*255]};I.xyz.lab=function(r){let e=r[0],t=r[1],n=r[2];e/=95.047,t/=100,n/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,t=t>.008856?t**(1/3):7.787*t+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;const s=116*t-16,i=500*(e-t),l=200*(t-n);return[s,i,l]};I.lab.xyz=function(r){const e=r[0],t=r[1],n=r[2];let s,i,l;i=(e+16)/116,s=t/500+i,l=i-n/200;const o=i**3,a=s**3,c=l**3;return i=o>.008856?o:(i-16/116)/7.787,s=a>.008856?a:(s-16/116)/7.787,l=c>.008856?c:(l-16/116)/7.787,s*=95.047,i*=100,l*=108.883,[s,i,l]};I.lab.lch=function(r){const e=r[0],t=r[1],n=r[2];let s;s=Math.atan2(n,t)*360/2/Math.PI,s<0&&(s+=360);const l=Math.sqrt(t*t+n*n);return[e,l,s]};I.lch.lab=function(r){const e=r[0],t=r[1],s=r[2]/360*2*Math.PI,i=t*Math.cos(s),l=t*Math.sin(s);return[e,i,l]};I.rgb.ansi16=function(r,e=null){const[t,n,s]=r;let i=e===null?I.rgb.hsv(r)[2]:e;if(i=Math.round(i/50),i===0)return 30;let l=30+(Math.round(s/255)<<2|Math.round(n/255)<<1|Math.round(t/255));return i===2&&(l+=60),l};I.hsv.ansi16=function(r){return I.rgb.ansi16(I.hsv.rgb(r),r[2])};I.rgb.ansi256=function(r){const e=r[0],t=r[1],n=r[2];return e===t&&t===n?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(t/255*5)+Math.round(n/255*5)};I.ansi16.rgb=function(r){let e=r%10;if(e===0||e===7)return r>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const t=(~~(r>50)+1)*.5,n=(e&1)*t*255,s=(e>>1&1)*t*255,i=(e>>2&1)*t*255;return[n,s,i]};I.ansi256.rgb=function(r){if(r>=232){const i=(r-232)*10+8;return[i,i,i]}r-=16;let e;const t=Math.floor(r/36)/5*255,n=Math.floor((e=r%36)/6)/5*255,s=e%6/5*255;return[t,n,s]};I.rgb.hex=function(r){const t=(((Math.round(r[0])&255)<<16)+((Math.round(r[1])&255)<<8)+(Math.round(r[2])&255)).toString(16).toUpperCase();return"000000".substring(t.length)+t};I.hex.rgb=function(r){const e=r.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let t=e[0];e[0].length===3&&(t=t.split("").map(o=>o+o).join(""));const n=parseInt(t,16),s=n>>16&255,i=n>>8&255,l=n&255;return[s,i,l]};I.rgb.hcg=function(r){const e=r[0]/255,t=r[1]/255,n=r[2]/255,s=Math.max(Math.max(e,t),n),i=Math.min(Math.min(e,t),n),l=s-i;let o,a;return l<1?o=i/(1-l):o=0,l<=0?a=0:s===e?a=(t-n)/l%6:s===t?a=2+(n-e)/l:a=4+(e-t)/l,a/=6,a%=1,[a*360,l*100,o*100]};I.hsl.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=t<.5?2*e*t:2*e*(1-t);let s=0;return n<1&&(s=(t-.5*n)/(1-n)),[r[0],n*100,s*100]};I.hsv.hcg=function(r){const e=r[1]/100,t=r[2]/100,n=e*t;let s=0;return n<1&&(s=(t-n)/(1-n)),[r[0],n*100,s*100]};I.hcg.rgb=function(r){const e=r[0]/360,t=r[1]/100,n=r[2]/100;if(t===0)return[n*255,n*255,n*255];const s=[0,0,0],i=e%1*6,l=i%1,o=1-l;let a=0;switch(Math.floor(i)){case 0:s[0]=1,s[1]=l,s[2]=0;break;case 1:s[0]=o,s[1]=1,s[2]=0;break;case 2:s[0]=0,s[1]=1,s[2]=l;break;case 3:s[0]=0,s[1]=o,s[2]=1;break;case 4:s[0]=l,s[1]=0,s[2]=1;break;default:s[0]=1,s[1]=0,s[2]=o}return a=(1-t)*n,[(t*s[0]+a)*255,(t*s[1]+a)*255,(t*s[2]+a)*255]};I.hcg.hsv=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);let s=0;return n>0&&(s=e/n),[r[0],s*100,n*100]};I.hcg.hsl=function(r){const e=r[1]/100,n=r[2]/100*(1-e)+.5*e;let s=0;return n>0&&n<.5?s=e/(2*n):n>=.5&&n<1&&(s=e/(2*(1-n))),[r[0],s*100,n*100]};I.hcg.hwb=function(r){const e=r[1]/100,t=r[2]/100,n=e+t*(1-e);return[r[0],(n-e)*100,(1-n)*100]};I.hwb.hcg=function(r){const e=r[1]/100,n=1-r[2]/100,s=n-e;let i=0;return s<1&&(i=(n-s)/(1-s)),[r[0],s*100,i*100]};I.apple.rgb=function(r){return[r[0]/65535*255,r[1]/65535*255,r[2]/65535*255]};I.rgb.apple=function(r){return[r[0]/255*65535,r[1]/255*65535,r[2]/255*65535]};I.gray.rgb=function(r){return[r[0]/100*255,r[0]/100*255,r[0]/100*255]};I.gray.hsl=function(r){return[0,0,r[0]]};I.gray.hsv=I.gray.hsl;I.gray.hwb=function(r){return[0,100,r[0]]};I.gray.cmyk=function(r){return[0,0,0,r[0]]};I.gray.lab=function(r){return[r[0],0,0]};I.gray.hex=function(r){const e=Math.round(r[0]/100*255)&255,n=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(n.length)+n};I.rgb.gray=function(r){return[(r[0]+r[1]+r[2])/3/255*100]};const Ue=kn;function as(){const r={},e=Object.keys(Ue);for(let t=e.length,n=0;n<t;n++)r[e[n]]={distance:-1,parent:null};return r}function cs(r){const e=as(),t=[r];for(e[r].distance=0;t.length;){const n=t.pop(),s=Object.keys(Ue[n]);for(let i=s.length,l=0;l<i;l++){const o=s[l],a=e[o];a.distance===-1&&(a.distance=e[n].distance+1,a.parent=n,t.unshift(o))}}return e}function us(r,e){return function(t){return e(r(t))}}function fs(r,e){const t=[e[r].parent,r];let n=Ue[e[r].parent][r],s=e[r].parent;for(;e[s].parent;)t.unshift(e[s].parent),n=us(Ue[e[s].parent][s],n),s=e[s].parent;return n.conversion=t,n}var ms=function(r){const e=cs(r),t={},n=Object.keys(e);for(let s=n.length,i=0;i<s;i++){const l=n[i];e[l].parent!==null&&(t[l]=fs(l,e))}return t};const tt=kn,ds=ms,Se={},hs=Object.keys(tt);function gs(r){const e=function(...t){const n=t[0];return n==null?n:(n.length>1&&(t=n),r(t))};return"conversion"in r&&(e.conversion=r.conversion),e}function bs(r){const e=function(...t){const n=t[0];if(n==null)return n;n.length>1&&(t=n);const s=r(t);if(typeof s=="object")for(let i=s.length,l=0;l<i;l++)s[l]=Math.round(s[l]);return s};return"conversion"in r&&(e.conversion=r.conversion),e}hs.forEach(r=>{Se[r]={},Object.defineProperty(Se[r],"channels",{value:tt[r].channels}),Object.defineProperty(Se[r],"labels",{value:tt[r].labels});const e=ds(r);Object.keys(e).forEach(n=>{const s=e[n];Se[r][n]=bs(s),Se[r][n].raw=gs(s)})});var _s=Se;const ps=r=>{const[e,t,n]=_s.hex.hsl(r);let i=e-206;return i<0&&(i+=360),[i,t,n]},vs=async(r,e)=>{const t=ht(be.retrieve()),[n,s,i]=ps(t[e]),l=r.getElement();if(!l)return;const o=e.replace(/\s/g,"");l.classList.add(`${o}-marker`);const a=`hue-rotate(${n}deg) saturate(${s}%)`;l.style.setProperty("filter",a),l.style.setProperty("opacity","0");const c=ue.retrieve().name;ye.getName()==="SAM"&&e===c&&l.style.setProperty("opacity","1")},Cn=async r=>{var a,c;if(r.geometry.type!=="Point")return;const[e,t]=r.geometry.coordinates;if(!e||!t)return;const n=L.latLng(t,e),s=L.marker(n),i=ee.addLayerWithProperties(s,r.properties,le.prompts);if(!((a=r.properties)!=null&&a.labels.length))return;const l=r.properties.labels[0];if(vs(s,l),is(l),((c=r.properties)==null?void 0:c.background)!==nr)return;await ut();const o=i.getElement();o==null||o.classList.add("background-marker")},ys=()=>{ws();const r=Ls();ks(r)},ws=()=>{const r=wn();dt(r),ee.retrieve().prompts.getLayers().forEach(t=>{ee.removeLayer(t,le.prompts)})},Ls=()=>{var t;const r=Ke.retrieve();return{...r,features:(t=r==null?void 0:r.features)==null?void 0:t.filter(n=>{var s;return(s=n.properties)==null?void 0:s.prompt})}},ks=r=>{var e;if((e=r.features)!=null&&e.length)for(const t of r.features)Cn(t)},Ye=r=>{ue.retrieve().name!==r.name&&(ue.store(r),ys())},Cs=(r,e)=>{Es(r,e),Ye({name:r,color:e}),yn()},Es=(r,e)=>{be.changeColor({name:r,color:e})};function Is(r){let e,t,n,s;return{c(){e=k("input"),this.h()},l(i){e=C(i,"INPUT",{type:!0,name:!0,class:!0,style:!0}),this.h()},h(){d(e,"type","color"),d(e,"name","color"),d(e,"class","max-w-[35px] h-[28px] box-border"),d(e,"style",t=`opacity: ${r[1]};`)},m(i,l){w(i,e,l),ve(e,r[0]),n||(s=[x(e,"input",r[5]),x(e,"change",r[6])],n=!0)},p(i,[l]){l&2&&t!==(t=`opacity: ${i[1]};`)&&d(e,"style",t),l&1&&ve(e,i[0])},i:S,o:S,d(i){i&&g(e),n=!1,Le(s)}}}function Ss(r,e,t){let n,s;R(r,ae,u=>t(4,s=u));let{color:i}=e,{name:l}=e;const o=()=>{Cs(l,i)};function a(){i=this.value,t(0,i)}const c=()=>o();return r.$$set=u=>{"color"in u&&t(0,i=u.color),"name"in u&&t(3,l=u.name)},r.$$.update=()=>{r.$$.dirty&16&&t(1,{opacity:n}=s,n)},[i,n,o,l,s,a,c]}class Ms extends P{constructor(e){super(),B(this,e,Ss,Is,N,{color:0,name:3})}}function As(r){let e=Tt(r[0])+"",t;return{c(){t=W(e)},l(n){t=Z(n,e)},m(n,s){w(n,t,s)},p(n,[s]){s&1&&e!==(e=Tt(n[0])+"")&&te(t,e)},i:S,o:S,d(n){n&&g(t)}}}function Ts(r,e,t){let{name:n}=e;return r.$$set=s=>{"name"in s&&t(0,n=s.name)},[n]}class Ps extends P{constructor(e){super(),B(this,e,Ts,As,N,{name:0})}}function Bs(r){let e,t,n,s,i,l,o,a,c,u,f;return t=new Ps({props:{name:r[4]}}),i=new rs({props:{name:r[4]}}),o=new Ms({props:{name:r[4],color:r[3]}}),{c(){e=k("button"),M(t.$$.fragment),n=O(),s=k("div"),M(i.$$.fragment),l=O(),M(o.$$.fragment),this.h()},l(h){e=C(h,"BUTTON",{class:!0});var m=v(e);D(t.$$.fragment,m),n=H(m),s=C(m,"DIV",{class:!0});var b=v(s);D(i.$$.fragment,b),l=H(b),D(o.$$.fragment,b),b.forEach(g),m.forEach(g),this.h()},h(){d(s,"class","flex h-full"),d(e,"class",a=`tab ${r[0].name===r[5].name&&!r[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)},m(h,m){w(h,e,m),A(t,e,null),_(e,n),_(e,s),A(i,s,null),_(s,l),A(o,s,null),c=!0,u||(f=x(e,"click",r[7]),u=!0)},p(h,[m]){const b={};m&16&&(b.name=h[4]),t.$set(b);const E={};m&16&&(E.name=h[4]),i.$set(E);const z={};m&16&&(z.name=h[4]),m&8&&(z.color=h[3]),o.$set(z),(!c||m&37&&a!==(a=`tab ${h[0].name===h[5].name&&!h[2]&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`))&&d(e,"class",a)},i(h){c||(p(t.$$.fragment,h),p(i.$$.fragment,h),p(o.$$.fragment,h),c=!0)},o(h){y(t.$$.fragment,h),y(i.$$.fragment,h),y(o.$$.fragment,h),c=!1},d(h){h&&g(e),T(t),T(i),T(o),u=!1,f()}}}function Ns(r,e,t){let n,s,i,l,o;R(r,ye,f=>t(6,l=f)),R(r,ue,f=>t(5,o=f));let{label:a,labelAction:c}=e;const u=()=>c(a);return r.$$set=f=>{"label"in f&&t(0,a=f.label),"labelAction"in f&&t(1,c=f.labelAction)},r.$$.update=()=>{r.$$.dirty&1&&t(4,{name:n,color:s}=a,n,(t(3,s),t(0,a))),r.$$.dirty&64&&t(2,i=l.name==="Classification")},[a,c,i,s,n,o,l,u]}class Ds extends P{constructor(e){super(),B(this,e,Ns,Bs,N,{label:0,labelAction:1})}}function zt(r,e,t){const n=r.slice();return n[2]=e[t],n}function jt(r,e){let t,n,s;return n=new Ds({props:{label:e[2],labelAction:e[0]}}),{key:r,first:null,c(){t=j(),M(n.$$.fragment),this.h()},l(i){t=j(),D(n.$$.fragment,i),this.h()},h(){this.first=t},m(i,l){w(i,t,l),A(n,i,l),s=!0},p(i,l){e=i;const o={};l&2&&(o.label=e[2]),l&1&&(o.labelAction=e[0]),n.$set(o)},i(i){s||(p(n.$$.fragment,i),s=!0)},o(i){y(n.$$.fragment,i),s=!1},d(i){i&&g(t),T(n,i)}}}function Os(r){let e,t=[],n=new Map,s,i=r[1];const l=o=>o[2].name;for(let o=0;o<i.length;o+=1){let a=zt(r,i,o),c=l(a);n.set(c,t[o]=jt(c,a))}return{c(){e=k("section");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=C(o,"SECTION",{class:!0,"aria-label":!0});var a=v(e);for(let c=0;c<t.length;c+=1)t[c].l(a);a.forEach(g),this.h()},h(){d(e,"class","flex-1 flex flex-col items-start w-full mt-5 max-h-[23vh] overflow-auto gap-1"),d(e,"aria-label","Label Selector")},m(o,a){w(o,e,a);for(let c=0;c<t.length;c+=1)t[c]&&t[c].m(e,null);s=!0},p(o,[a]){a&3&&(i=o[1],X(),t=ft(t,a,l,1,o,i,n,e,dn,jt,null,zt),Y())},i(o){if(!s){for(let a=0;a<i.length;a+=1)p(t[a]);s=!0}},o(o){for(let a=0;a<t.length;a+=1)y(t[a]);s=!1},d(o){o&&g(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Hs(r,e,t){let n;R(r,be,i=>t(1,n=i));let{labelAction:s}=e;return r.$$set=i=>{"labelAction"in i&&t(0,s=i.labelAction)},[s,n]}class gt extends P{constructor(e){super(),B(this,e,Hs,Os,N,{labelAction:0})}}function zs(r){let e,t;return e=new gt({props:{labelAction:Kr}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:S,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}class js extends P{constructor(e){super(),B(this,e,null,zs,N,{})}}const En=r=>{const{layers:e}=r;e.eachLayer(t=>{ee.removeLayer(t,le.detection)}),ce.saving.enable()},In=r=>{const{layer:e}=r;e.options.color=ue.retrieve().color,e.options.fillOpacity=ae.retrieve().opacity,e.options.interactive=!1;const t=e.getBounds(),n={labels:[ue.retrieve().name],bbox:[[t._southWest.lat,t._northEast.lng],[t._northEast.lat,t._southWest.lng]]};ee.addLayerWithProperties(e,n,le.detection),ce.saving.enable()},Sn=r=>{const{layers:e}=r;e.eachLayer(t=>{if(t instanceof L.Rectangle){const n=t.getBounds();t.feature.properties.bbox=[[n.getSouthWest().lat,n.getNorthEast().lng],[n.getNorthEast().lat,n.getSouthWest().lng]]}t.feature.properties.updatedAt=new Date}),ce.saving.enable()},Vs=()=>{const r=$.retrieve();r&&(r.on(L.Draw.Event.CREATED,In),r.on(L.Draw.Event.EDITED,Sn),r.on(L.Draw.Event.DELETED,En))},Rs=()=>{const r=$.retrieve();r&&(r.off(L.Draw.Event.CREATED,In),r.off(L.Draw.Event.EDITED,Sn),r.off(L.Draw.Event.DELETED,En))},qs=()=>{const r=$.retrieve();if(!r)return;const{detection:e}=ee.retrieve(),t=new L.Control.Draw({position:rr,edit:{featureGroup:e},draw:sr});return r.addControl(t),Fs(),t},Fs=()=>{const r=document.getElementsByClassName("leaflet-draw-draw-rectangle")[0];r&&r.click()},Gs=r=>{const e=$.retrieve();!e||!r||e.removeControl(r)};function Us(r,e,t){let n;R(r,ee,i=>t(1,n=i));let s;return we(()=>{Gs(s),t(0,s=null),Rs()}),r.$$.update=()=>{r.$$.dirty&3&&n!=null&&n.detection&&(s||(t(0,s=qs()),Vs()))},[s,n]}class Ws extends P{constructor(e){super(),B(this,e,Us,null,N,{})}}const Mn=()=>{const{segmentation:r}=ee.retrieve(),e=ue.retrieve().name;let t;return r.eachLayer(n=>{var s,i;(i=(s=n.feature)==null?void 0:s.properties)!=null&&i.labels.includes(e)&&(t=n)}),t||null},Zs=r=>r.toGeoJSON().features[0],Qs=()=>{const r=Mn();return r?Zs(r):null},{tasks:Js}=Je,Ks=r=>{const e=Mn();e&&ee.removeLayer(e,le.segmentation),r&&r.properties&&(r.properties.labels=[ue.retrieve().name],r.properties[Js]=["segmentation"]);const t=ae.retrieve().opacity,n=L.geoJSON(r,{style:{color:ue.retrieve().color,weight:.4,fillOpacity:t,interactive:!1}}),s={labels:[ue.retrieve().name],multipolygon:!0};return ee.addLayerWithProperties(n,s,le.segmentation),ce.saving.enable(),n},An=(r=!1)=>{const e=$.retrieve();return e?L.control.paintPolygon({initData:Qs,drawCallback:Ks,selectEraser:r}).addTo(e):void 0},Tn=r=>{const e=$.retrieve();!e||!r||e.removeControl(r)},Xs=()=>{const r="leaflet-control-paintpolygon-icon-eraser",e=document.getElementsByClassName(r)[0];return e?e.classList.contains("leaflet-control-paintpolygon-icon-active"):!1},Ys=r=>{const e=Xs();return Tn(r),An(e)};function xs(r,e,t){let n,s,i;R(r,$,o=>t(1,n=o)),R(r,_e,o=>t(2,s=o)),R(r,ue,o=>t(3,i=o));let l;return We(async()=>{await qe(()=>import("../chunks/PaintPolygon.51edf5e3.js"),["../chunks/PaintPolygon.51edf5e3.js","../assets/PaintPolygon.c10d0736.css"],import.meta.url),t(0,l=An())}),we(()=>{Tn(l),t(0,l=null)}),r.$$.update=()=>{r.$$.dirty&15&&i!=null&&i.name&&s!=null&&s.name&&n&&l&&t(0,l=Ys(l))},[l,n,s,i]}class $s extends P{constructor(e){super(),B(this,e,xs,null,N,{})}}const nt=se(!0),ei=()=>{const r=Be.retrieve(),{bands:e,stretch:t}=ae.retrieve(),n=Object.values(e).join(","),s=Object.values(t).join(","),i=ir,l=_e.retrieve().name;return`${r}images/${l}/{z}/{x}/{y}.png?bands=${n}&stretch=${s}&palette=${i}`};let Re;const bt=async()=>{const r=$.retrieve(),e=_e.retrieve(),t=ei();if(!r||!e)return;Re&&r.removeLayer(Re),Re=L.tileLayer(t,lr).addTo(r);const n=Re.getContainer();await ut(),n.ariaLabel=`${e.name} image layer`,Q(nt)&&ti(e,r)},ti=(r,e)=>{const t=L.latLng(r.bbox[1],r.bbox[0]),n=L.latLng(r.bbox[3],r.bbox[2]),s=L.latLngBounds(t,n);e.fitBounds(s)},_t=()=>{const r=ae.retrieve();or("options",r)},ni=r=>{const{name:e,value:t}=r.target,n=Number(t);ri(e,n),bt()},ri=(r,e)=>{si(r,e),_t()},si=(r,e)=>{ae.bands[r].store(e)},ii=async r=>{var s;const[e,t]=ar(r);if(!(e&&t))return;let n=li((s=r.properties)==null?void 0:s.labels);ke.store(n),vn()},li=r=>r.map(e=>({name:e})),oi=async r=>{var l,o;const e=ht(be.retrieve()),t=ae.opacity.retrieve(),n=(l=r.properties)==null?void 0:l.labels[0],s=e[n],i=L.rectangle((o=r.properties)==null?void 0:o.bbox,{color:s,weight:bn,fillOpacity:t,interactive:!1});ee.addLayerWithProperties(i,r.properties,le.detection)},ai=async r=>{var o;const e=ht(be.retrieve()),t=ae.opacity.retrieve(),n=(o=r.properties)==null?void 0:o.labels[0],i={color:e[n],weight:bn,fillOpacity:t,interactive:!1},l=L.geoJSON(r,{style:i});ee.addLayerWithProperties(l,r.properties,le.segmentation)},Pn=r=>{fi(),ui(r)},{tasks:ci}=Je,ui=r=>{r.features.forEach(e=>{var n,s;const t=(s=(n=e.properties)==null?void 0:n[ci])==null?void 0:s[0];if(t){if(t.includes(le.classification)){ii(e);return}if(t.includes(le.segmentation)){ai(e);return}if(t.includes(le.detection)){oi(e);return}if(t.includes(le.prompts)){Cn(e);return}}})},fi=()=>{ke.store([])},Bn=()=>{const r=$.retrieve();ee.clear(r);const e=Ke.retrieve();Pn(e)},mi=r=>{const{value:e}=r.target,t=Number(e);di(t),Bn()},di=r=>{hi(r),_t()},hi=r=>{const e=r/100;ae.opacity.store(e)},gi=r=>{const{name:e,value:t}=r.target,n=Number(t);bi(e,n),bt()},bi=(r,e)=>{_i(r,e),_t()},_i=(r,e)=>{ae.stretch[r].store(e)};function pi(r){let e,t,n,s,i,l,o,a,c,u,f,h,m,b,E,z,F,G,q,ie,re,pe,fe,me,Ee,$e,he,Oe,et,yt;return{c(){e=k("section"),t=k("legend"),n=k("span"),s=W("RGB bands"),i=O(),l=k("fieldset"),o=k("input"),a=O(),c=k("input"),u=O(),f=k("input"),h=O(),m=k("section"),b=k("legend"),E=k("span"),z=W("Stretch"),F=O(),G=k("fieldset"),q=k("input"),ie=O(),re=k("input"),pe=O(),fe=k("section"),me=k("label"),Ee=W("Layer opacity"),$e=O(),he=k("input"),this.h()},l(V){e=C(V,"SECTION",{});var ne=v(e);t=C(ne,"LEGEND",{class:!0});var wt=v(t);n=C(wt,"SPAN",{});var Lt=v(n);s=Z(Lt,"RGB bands"),Lt.forEach(g),wt.forEach(g),i=H(ne),l=C(ne,"FIELDSET",{class:!0});var Ie=v(l);o=C(Ie,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),a=H(Ie),c=C(Ie,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),u=H(Ie),f=C(Ie,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),Ie.forEach(g),ne.forEach(g),h=H(V),m=C(V,"SECTION",{});var He=v(m);b=C(He,"LEGEND",{class:!0});var kt=v(b);E=C(kt,"SPAN",{});var Ct=v(E);z=Z(Ct,"Stretch"),Ct.forEach(g),kt.forEach(g),F=H(He),G=C(He,"FIELDSET",{class:!0});var ze=v(G);q=C(ze,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),ie=H(ze),re=C(ze,"INPUT",{type:!0,placeholder:!0,name:!0,class:!0}),ze.forEach(g),He.forEach(g),pe=H(V),fe=C(V,"SECTION",{class:!0});var je=v(fe);me=C(je,"LABEL",{for:!0,class:!0});var Et=v(me);Ee=Z(Et,"Layer opacity"),Et.forEach(g),$e=H(je),he=C(je,"INPUT",{id:!0,type:!0,min:!0,max:!0,class:!0}),je.forEach(g),this.h()},h(){d(t,"class","label"),o.required=!0,d(o,"type","number"),d(o,"placeholder","R"),d(o,"name","red"),d(o,"class","text-center input input-bordered input-error w-full max-w-xs svelte-7yy2hn"),o.value=r[0],c.required=!0,d(c,"type","number"),d(c,"placeholder","G"),d(c,"name","green"),d(c,"class","text-center input input-bordered input-success w-full max-w-xs svelte-7yy2hn"),c.value=r[1],f.required=!0,d(f,"type","number"),d(f,"placeholder","B"),d(f,"name","blue"),d(f,"class","text-center input input-bordered input-info w-full max-w-xs svelte-7yy2hn"),f.value=r[2],d(l,"class","flex gap-3"),d(b,"class","label"),q.required=!0,d(q,"type","number"),d(q,"placeholder","Minimum"),d(q,"name","minimum"),d(q,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),q.value=r[3],re.required=!0,d(re,"type","number"),d(re,"placeholder","Maximum"),d(re,"name","maximum"),d(re,"class","input input-bordered w-full max-w-xs svelte-7yy2hn"),re.value=r[4],d(G,"class","flex gap-3"),d(me,"for","opacity-range"),d(me,"class","label"),d(he,"id","opacity-range"),d(he,"type","range"),d(he,"min","0"),d(he,"max","100"),he.value=Oe=r[5]*100,d(he,"class","range range-primary svelte-7yy2hn"),d(fe,"class","flex flex-col gap-3")},m(V,ne){w(V,e,ne),_(e,t),_(t,n),_(n,s),_(e,i),_(e,l),_(l,o),_(l,a),_(l,c),_(l,u),_(l,f),w(V,h,ne),w(V,m,ne),_(m,b),_(b,E),_(E,z),_(m,F),_(m,G),_(G,q),_(G,ie),_(G,re),w(V,pe,ne),w(V,fe,ne),_(fe,me),_(me,Ee),_(fe,$e),_(fe,he),et||(yt=[x(l,"input",ni),x(G,"input",gi),x(he,"input",mi)],et=!0)},p(V,ne){ne&1&&o.value!==V[0]&&(o.value=V[0]),ne&2&&c.value!==V[1]&&(c.value=V[1]),ne&4&&f.value!==V[2]&&(f.value=V[2]),ne&8&&q.value!==V[3]&&(q.value=V[3]),ne&16&&re.value!==V[4]&&(re.value=V[4]),ne&32&&Oe!==(Oe=V[5]*100)&&(he.value=Oe)},d(V){V&&g(e),V&&g(h),V&&g(m),V&&g(pe),V&&g(fe),et=!1,Le(yt)}}}function vi(r){let e,t=ae&&pi(r);return{c(){e=k("form"),t&&t.c(),this.h()},l(n){e=C(n,"FORM",{class:!0,id:!0});var s=v(e);t&&t.l(s),s.forEach(g),this.h()},h(){d(e,"class","flex-1 form-control w-full h-full max-w-xs flex flex-col gap-5 items text-xl"),d(e,"id","bands-and-stretch")},m(n,s){w(n,e,s),t&&t.m(e,null)},p(n,[s]){ae&&t.p(n,s)},i:S,o:S,d(n){n&&g(e),t&&t.d()}}}function yi(r,e,t){let n;R(r,ae,u=>t(6,n=u));let s,i,l,o,a,c;return r.$$.update=()=>{r.$$.dirty&64&&t(0,{bands:{red:s,green:i,blue:l},stretch:{minimum:o,maximum:a},opacity:c}=n,s,(t(1,i),t(6,n)),(t(2,l),t(6,n)),(t(3,o),t(6,n)),(t(4,a),t(6,n)),(t(5,c),t(6,n)))},[s,i,l,o,a,c,n]}class wi extends P{constructor(e){super(),B(this,e,yi,vi,N,{})}}const rt=se(!0);function Li(r,e,t,n){var s,i,l=!1,o=t.length>=2,a=(b,E,z)=>{if(s=E,o&&(i=b),!l){let F=e(b,E,z);if(e.length<2)E(F);else return F}l=!1},c=Yn(r,a,n),u=!Array.isArray(r);function f(b){var E=t(b,i);u?(l=!0,r.set(E)):E.forEach((z,F)=>{l=!0,r[F].set(z)}),l=!1}var h=!1;function m(b){var E,z,F,G;if(h){G=b(Q(c)),s(G);return}var q=c.subscribe(ie=>{h?E?z=!0:E=!0:F=ie});G=b(F),h=!0,s(G),q(),h=!1,z&&(G=Q(c)),E&&f(G)}return{subscribe:c.subscribe,set(b){m(()=>b)},update:m}}const ki=20,Ce=se([]),pt=se(null),Fe=new Map,Vt=r=>{if(Fe.has(r))return;const e=setTimeout(()=>{Fe.delete(r),Dn(r)},1e3);Fe.set(r,e)},Ci=r=>{const e=Fe.get(r);e&&clearTimeout(e)};function Nn(r){r.id&&Ci(r.id),Ce.update(e=>e.map(t=>t.id===r.id?{...t,...r}:t))}function Ei(r){Ce.update(e=>[r,...e].slice(0,ki))}function Ii(r){Q(Ce).find(e=>e.id===r.id)?Nn(r):Ei(r)}function Si(r){Ce.update(e=>(r?Vt(r):e.forEach(t=>{Vt(t.id)}),e.map(t=>t.id===r||r===void 0?{...t,visible:!1}:t)))}function Dn(r){Ce.update(e=>r===void 0?[]:e.filter(t=>t.id!==r))}function Mi(r){pt.set(r)}function Ai(r){let e;pt.update(t=>(e=r-(t||0),null)),Ce.update(t=>t.map(n=>({...n,pauseDuration:n.pauseDuration+e})))}const Ti={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function Pi(r={}){return{toasts:Li(Ce,t=>t.map(n=>{var s,i;return{...r,...r[n.type],...n,duration:n.duration||((s=r[n.type])==null?void 0:s.duration)||(r==null?void 0:r.duration)||Ti[n.type],style:[r.style,(i=r[n.type])==null?void 0:i.style,n.style].join(";")}}),t=>t),pausedAt:pt}}const Bi=r=>typeof r=="function",Rt=(r,e)=>Bi(r)?r(e):r,Ni=(()=>{let r=0;return()=>(r+=1,r.toString())})(),On=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),Di=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:(t==null?void 0:t.id)||Ni()}),De=r=>(e,t)=>{const n=Di(e,r,t);return Ii(n),n.id},oe=(r,e)=>De("blank")(r,e);oe.error=De("error");oe.success=De("success");oe.loading=De("loading");oe.custom=De("custom");oe.dismiss=r=>{Si(r)};oe.remove=r=>Dn(r);oe.promise=(r,e,t)=>{const n=oe.loading(e.loading,{...t,...t==null?void 0:t.loading});return r.then(s=>(oe.success(Rt(e.success,s),{id:n,...t,...t==null?void 0:t.success}),s)).catch(s=>{oe.error(Rt(e.error,s),{id:n,...t,...t==null?void 0:t.error})}),r};function Oi(r,e,t){const{reverseOrder:n,gutter:s=8,defaultPosition:i}=t||{},l=e.filter(u=>(u.position||i)===(r.position||i)&&u.height),o=l.findIndex(u=>u.id===r.id),a=l.filter((u,f)=>f<o&&u.visible).length;return l.filter(u=>u.visible).slice(...n?[a+1]:[0,a]).reduce((u,f)=>u+(f.height||0)+s,0)}const Hi={startPause(){Mi(Date.now())},endPause(){Ai(Date.now())},updateHeight:(r,e)=>{Nn({id:r,height:e})},calculateOffset:Oi};function zi(r){const{toasts:e,pausedAt:t}=Pi(r),n=new Map;let s;const i=[t.subscribe(l=>{if(l){for(const[,o]of n)clearTimeout(o);n.clear()}s=l}),e.subscribe(l=>{if(s)return;const o=Date.now();for(const a of l){if(n.has(a.id)||a.duration===1/0)continue;const c=(a.duration||0)+a.pauseDuration-(o-a.createdAt);if(c<0)return a.visible&&oe.dismiss(a.id),null;n.set(a.id,setTimeout(()=>oe.dismiss(a.id),c))}})];return we(()=>{for(const l of i)l()}),{toasts:e,handlers:Hi}}function ji(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){d(e,"class","svelte-11kvm4p"),U(e,"--primary",r[0]),U(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&U(e,"--primary",t[0]),n&2&&U(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function Vi(r,e,t){let{primary:n="#61d345"}=e,{secondary:s="#fff"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class Ri extends P{constructor(e){super(),B(this,e,Vi,ji,N,{primary:0,secondary:1})}}function qi(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){d(e,"class","svelte-1ee93ns"),U(e,"--primary",r[0]),U(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&U(e,"--primary",t[0]),n&2&&U(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function Fi(r,e,t){let{primary:n="#ff4b4b"}=e,{secondary:s="#fff"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class Gi extends P{constructor(e){super(),B(this,e,Fi,qi,N,{primary:0,secondary:1})}}function Ui(r){let e;return{c(){e=k("div"),this.h()},l(t){e=C(t,"DIV",{class:!0}),v(e).forEach(g),this.h()},h(){d(e,"class","svelte-1j7dflg"),U(e,"--primary",r[0]),U(e,"--secondary",r[1])},m(t,n){w(t,e,n)},p(t,[n]){n&1&&U(e,"--primary",t[0]),n&2&&U(e,"--secondary",t[1])},i:S,o:S,d(t){t&&g(e)}}}function Wi(r,e,t){let{primary:n="#616161"}=e,{secondary:s="#e0e0e0"}=e;return r.$$set=i=>{"primary"in i&&t(0,n=i.primary),"secondary"in i&&t(1,s=i.secondary)},[n,s]}class Zi extends P{constructor(e){super(),B(this,e,Wi,Ui,N,{primary:0,secondary:1})}}function Qi(r){let e,t,n,s;const i=[r[0]];let l={};for(let a=0;a<i.length;a+=1)l=Ze(l,i[a]);t=new Zi({props:l});let o=r[2]!=="loading"&&qt(r);return{c(){e=k("div"),M(t.$$.fragment),n=O(),o&&o.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);D(t.$$.fragment,c),n=H(c),o&&o.l(c),c.forEach(g),this.h()},h(){d(e,"class","indicator svelte-1kgeier")},m(a,c){w(a,e,c),A(t,e,null),_(e,n),o&&o.m(e,null),s=!0},p(a,c){const u=c&1?Qe(i,[mt(a[0])]):{};t.$set(u),a[2]!=="loading"?o?(o.p(a,c),c&4&&p(o,1)):(o=qt(a),o.c(),p(o,1),o.m(e,null)):o&&(X(),y(o,1,1,()=>{o=null}),Y())},i(a){s||(p(t.$$.fragment,a),p(o),s=!0)},o(a){y(t.$$.fragment,a),y(o),s=!1},d(a){a&&g(e),T(t),o&&o.d()}}}function Ji(r){let e,t,n;var s=r[1];function i(l){return{}}return s&&(e=de(s,i())),{c(){e&&M(e.$$.fragment),t=j()},l(l){e&&D(e.$$.fragment,l),t=j()},m(l,o){e&&A(e,l,o),w(l,t,o),n=!0},p(l,o){if(o&2&&s!==(s=l[1])){if(e){X();const a=e;y(a.$$.fragment,1,0,()=>{T(a,1)}),Y()}s?(e=de(s,i()),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(l){n||(e&&p(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&T(e,l)}}}function Ki(r){let e,t;return{c(){e=k("div"),t=W(r[1]),this.h()},l(n){e=C(n,"DIV",{class:!0});var s=v(e);t=Z(s,r[1]),s.forEach(g),this.h()},h(){d(e,"class","animated svelte-1kgeier")},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&2&&te(t,n[1])},i:S,o:S,d(n){n&&g(e)}}}function qt(r){let e,t,n,s;const i=[Yi,Xi],l=[];function o(a,c){return a[2]==="error"?0:1}return t=o(r),n=l[t]=i[t](r),{c(){e=k("div"),n.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(g),this.h()},h(){d(e,"class","status svelte-1kgeier")},m(a,c){w(a,e,c),l[t].m(e,null),s=!0},p(a,c){let u=t;t=o(a),t===u?l[t].p(a,c):(X(),y(l[u],1,1,()=>{l[u]=null}),Y(),n=l[t],n?n.p(a,c):(n=l[t]=i[t](a),n.c()),p(n,1),n.m(e,null))},i(a){s||(p(n),s=!0)},o(a){y(n),s=!1},d(a){a&&g(e),l[t].d()}}}function Xi(r){let e,t;const n=[r[0]];let s={};for(let i=0;i<n.length;i+=1)s=Ze(s,n[i]);return e=new Ri({props:s}),{c(){M(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,l){A(e,i,l),t=!0},p(i,l){const o=l&1?Qe(n,[mt(i[0])]):{};e.$set(o)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function Yi(r){let e,t;const n=[r[0]];let s={};for(let i=0;i<n.length;i+=1)s=Ze(s,n[i]);return e=new Gi({props:s}),{c(){M(e.$$.fragment)},l(i){D(e.$$.fragment,i)},m(i,l){A(e,i,l),t=!0},p(i,l){const o=l&1?Qe(n,[mt(i[0])]):{};e.$set(o)},i(i){t||(p(e.$$.fragment,i),t=!0)},o(i){y(e.$$.fragment,i),t=!1},d(i){T(e,i)}}}function xi(r){let e,t,n,s;const i=[Ki,Ji,Qi],l=[];function o(a,c){return typeof a[1]=="string"?0:typeof a[1]<"u"?1:a[2]!=="blank"?2:-1}return~(e=o(r))&&(t=l[e]=i[e](r)),{c(){t&&t.c(),n=j()},l(a){t&&t.l(a),n=j()},m(a,c){~e&&l[e].m(a,c),w(a,n,c),s=!0},p(a,[c]){let u=e;e=o(a),e===u?~e&&l[e].p(a,c):(t&&(X(),y(l[u],1,1,()=>{l[u]=null}),Y()),~e?(t=l[e],t?t.p(a,c):(t=l[e]=i[e](a),t.c()),p(t,1),t.m(n.parentNode,n)):t=null)},i(a){s||(p(t),s=!0)},o(a){y(t),s=!1},d(a){~e&&l[e].d(a),a&&g(n)}}}function $i(r,e,t){let n,s,i,{toast:l}=e;return r.$$set=o=>{"toast"in o&&t(3,l=o.toast)},r.$$.update=()=>{r.$$.dirty&8&&t(2,{type:n,icon:s,iconTheme:i}=l,n,(t(1,s),t(3,l)),(t(0,i),t(3,l)))},[i,s,n,l]}class vt extends P{constructor(e){super(),B(this,e,$i,xi,N,{toast:3})}}function el(r){let e,t,n;var s=r[0].message;function i(l){return{props:{toast:l[0]}}}return s&&(e=de(s,i(r))),{c(){e&&M(e.$$.fragment),t=j()},l(l){e&&D(e.$$.fragment,l),t=j()},m(l,o){e&&A(e,l,o),w(l,t,o),n=!0},p(l,o){const a={};if(o&1&&(a.toast=l[0]),o&1&&s!==(s=l[0].message)){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{T(c,1)}),Y()}s?(e=de(s,i(l)),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){n||(e&&p(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&T(e,l)}}}function tl(r){let e=r[0].message+"",t;return{c(){t=W(e)},l(n){t=Z(n,e)},m(n,s){w(n,t,s)},p(n,s){s&1&&e!==(e=n[0].message+"")&&te(t,e)},i:S,o:S,d(n){n&&g(t)}}}function nl(r){let e,t,n,s;const i=[tl,el],l=[];function o(u,f){return typeof u[0].message=="string"?0:1}t=o(r),n=l[t]=i[t](r);let a=[{class:"message"},r[0].ariaProps],c={};for(let u=0;u<a.length;u+=1)c=Ze(c,a[u]);return{c(){e=k("div"),n.c(),this.h()},l(u){e=C(u,"DIV",{class:!0});var f=v(e);n.l(f),f.forEach(g),this.h()},h(){It(e,c),Ae(e,"svelte-1nauejd",!0)},m(u,f){w(u,e,f),l[t].m(e,null),s=!0},p(u,[f]){let h=t;t=o(u),t===h?l[t].p(u,f):(X(),y(l[h],1,1,()=>{l[h]=null}),Y(),n=l[t],n?n.p(u,f):(n=l[t]=i[t](u),n.c()),p(n,1),n.m(e,null)),It(e,c=Qe(a,[{class:"message"},f&1&&u[0].ariaProps])),Ae(e,"svelte-1nauejd",!0)},i(u){s||(p(n),s=!0)},o(u){y(n),s=!1},d(u){u&&g(e),l[t].d()}}}function rl(r,e,t){let{toast:n}=e;return r.$$set=s=>{"toast"in s&&t(0,n=s.toast)},[n]}class xe extends P{constructor(e){super(),B(this,e,rl,nl,N,{toast:0})}}const sl=r=>({toast:r&1}),Ft=r=>({ToastIcon:vt,ToastMessage:xe,toast:r[0]});function il(r){let e;const t=r[6].default,n=lt(t,r,r[7],Ft),s=n||ol(r);return{c(){s&&s.c()},l(i){s&&s.l(i)},m(i,l){s&&s.m(i,l),e=!0},p(i,l){n?n.p&&(!e||l&129)&&ot(n,t,i,i[7],e?ct(t,i[7],l,sl):at(i[7]),Ft):s&&s.p&&(!e||l&1)&&s.p(i,e?l:-1)},i(i){e||(p(s,i),e=!0)},o(i){y(s,i),e=!1},d(i){s&&s.d(i)}}}function ll(r){let e,t,n;var s=r[2];function i(l){return{props:{$$slots:{message:[cl],icon:[al]},$$scope:{ctx:l}}}}return s&&(e=de(s,i(r))),{c(){e&&M(e.$$.fragment),t=j()},l(l){e&&D(e.$$.fragment,l),t=j()},m(l,o){e&&A(e,l,o),w(l,t,o),n=!0},p(l,o){const a={};if(o&129&&(a.$$scope={dirty:o,ctx:l}),o&4&&s!==(s=l[2])){if(e){X();const c=e;y(c.$$.fragment,1,0,()=>{T(c,1)}),Y()}s?(e=de(s,i(l)),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}else s&&e.$set(a)},i(l){n||(e&&p(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&T(e,l)}}}function ol(r){let e,t,n,s;return e=new vt({props:{toast:r[0]}}),n=new xe({props:{toast:r[0]}}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(i){D(e.$$.fragment,i),t=H(i),D(n.$$.fragment,i)},m(i,l){A(e,i,l),w(i,t,l),A(n,i,l),s=!0},p(i,l){const o={};l&1&&(o.toast=i[0]),e.$set(o);const a={};l&1&&(a.toast=i[0]),n.$set(a)},i(i){s||(p(e.$$.fragment,i),p(n.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),y(n.$$.fragment,i),s=!1},d(i){T(e,i),i&&g(t),T(n,i)}}}function al(r){let e,t;return e=new vt({props:{toast:r[0],slot:"icon"}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function cl(r){let e,t;return e=new xe({props:{toast:r[0],slot:"message"}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function ul(r){let e,t,n,s,i,l;const o=[ll,il],a=[];function c(u,f){return u[2]?0:1}return t=c(r),n=a[t]=o[t](r),{c(){e=k("div"),n.c(),this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0});var f=v(e);n.l(f),f.forEach(g),this.h()},h(){d(e,"class",s="base "+(r[0].height?r[4]:"transparent")+" "+(r[0].className||"")+" svelte-ug60r4"),d(e,"style",i=r[1]+"; "+r[0].style),U(e,"--factor",r[3])},m(u,f){w(u,e,f),a[t].m(e,null),l=!0},p(u,[f]){let h=t;t=c(u),t===h?a[t].p(u,f):(X(),y(a[h],1,1,()=>{a[h]=null}),Y(),n=a[t],n?n.p(u,f):(n=a[t]=o[t](u),n.c()),p(n,1),n.m(e,null)),(!l||f&17&&s!==(s="base "+(u[0].height?u[4]:"transparent")+" "+(u[0].className||"")+" svelte-ug60r4"))&&d(e,"class",s),(!l||f&3&&i!==(i=u[1]+"; "+u[0].style))&&d(e,"style",i),(f&3||f&11)&&U(e,"--factor",u[3])},i(u){l||(p(n),l=!0)},o(u){y(n),l=!1},d(u){u&&g(e),a[t].d()}}}function fl(r,e,t){let{$$slots:n={},$$scope:s}=e,{toast:i}=e,{position:l=void 0}=e,{style:o=""}=e,{Component:a=void 0}=e,c,u;return r.$$set=f=>{"toast"in f&&t(0,i=f.toast),"position"in f&&t(5,l=f.position),"style"in f&&t(1,o=f.style),"Component"in f&&t(2,a=f.Component),"$$scope"in f&&t(7,s=f.$$scope)},r.$$.update=()=>{if(r.$$.dirty&33){const f=(i.position||l||"top-center").includes("top");t(3,c=f?1:-1);const[h,m]=On()?["fadeIn","fadeOut"]:["enter","exit"];t(4,u=i.visible?h:m)}},[i,o,a,c,u,l,n,s]}class ml extends P{constructor(e){super(),B(this,e,fl,ul,N,{toast:0,position:5,style:1,Component:2})}}const dl=r=>({toast:r&1}),Gt=r=>({toast:r[0]});function hl(r){let e;const t=r[8].default,n=lt(t,r,r[7],Gt),s=n||bl(r);return{c(){s&&s.c()},l(i){s&&s.l(i)},m(i,l){s&&s.m(i,l),e=!0},p(i,l){n?n.p&&(!e||l&129)&&ot(n,t,i,i[7],e?ct(t,i[7],l,dl):at(i[7]),Gt):s&&s.p&&(!e||l&1)&&s.p(i,e?l:-1)},i(i){e||(p(s,i),e=!0)},o(i){y(s,i),e=!1},d(i){s&&s.d(i)}}}function gl(r){let e,t;return e=new xe({props:{toast:r[0]}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function bl(r){let e,t;return e=new ml({props:{toast:r[0],position:r[0].position}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p(n,s){const i={};s&1&&(i.toast=n[0]),s&1&&(i.position=n[0].position),e.$set(i)},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function _l(r){let e,t,n,s;const i=[gl,hl],l=[];function o(a,c){return a[0].type==="custom"?0:1}return t=o(r),n=l[t]=i[t](r),{c(){e=k("div"),n.c(),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);n.l(c),c.forEach(g),this.h()},h(){d(e,"class","wrapper svelte-v01oml"),Ae(e,"active",r[0].visible),Ae(e,"transition",!On()),U(e,"--factor",r[3]),U(e,"--offset",r[0].offset),U(e,"top",r[5]),U(e,"bottom",r[4]),U(e,"justify-content",r[2])},m(a,c){w(a,e,c),l[t].m(e,null),r[9](e),s=!0},p(a,[c]){let u=t;t=o(a),t===u?l[t].p(a,c):(X(),y(l[u],1,1,()=>{l[u]=null}),Y(),n=l[t],n?n.p(a,c):(n=l[t]=i[t](a),n.c()),p(n,1),n.m(e,null)),(!s||c&1)&&Ae(e,"active",a[0].visible),c&8&&U(e,"--factor",a[3]),c&1&&U(e,"--offset",a[0].offset),c&32&&U(e,"top",a[5]),c&16&&U(e,"bottom",a[4]),c&4&&U(e,"justify-content",a[2])},i(a){s||(p(n),s=!0)},o(a){y(n),s=!1},d(a){a&&g(e),l[t].d(),r[9](null)}}}function pl(r,e,t){let n,s,i,l,{$$slots:o={},$$scope:a}=e,{toast:c}=e,{setHeight:u}=e,f;We(()=>{u(f.getBoundingClientRect().height)});function h(m){hn[m?"unshift":"push"](()=>{f=m,t(1,f)})}return r.$$set=m=>{"toast"in m&&t(0,c=m.toast),"setHeight"in m&&t(6,u=m.setHeight),"$$scope"in m&&t(7,a=m.$$scope)},r.$$.update=()=>{var m,b,E,z,F,G;r.$$.dirty&1&&t(5,n=(m=c.position)!=null&&m.includes("top")?0:null),r.$$.dirty&1&&t(4,s=(b=c.position)!=null&&b.includes("bottom")?0:null),r.$$.dirty&1&&t(3,i=(E=c.position)!=null&&E.includes("top")?1:-1),r.$$.dirty&1&&t(2,l=((z=c.position)==null?void 0:z.includes("center"))&&"center"||(((F=c.position)==null?void 0:F.includes("right"))||((G=c.position)==null?void 0:G.includes("end")))&&"flex-end"||null)},[c,f,l,i,s,n,u,a,o,h]}class vl extends P{constructor(e){super(),B(this,e,pl,_l,N,{toast:0,setHeight:6})}}function Ut(r,e,t){const n=r.slice();return n[11]=e[t],n}function Wt(r,e){let t,n,s;function i(...l){return e[10](e[11],...l)}return n=new vl({props:{toast:e[11],setHeight:i}}),{key:r,first:null,c(){t=j(),M(n.$$.fragment),this.h()},l(l){t=j(),D(n.$$.fragment,l),this.h()},h(){this.first=t},m(l,o){w(l,t,o),A(n,l,o),s=!0},p(l,o){e=l;const a={};o&4&&(a.toast=e[11]),o&4&&(a.setHeight=i),n.$set(a)},i(l){s||(p(n.$$.fragment,l),s=!0)},o(l){y(n.$$.fragment,l),s=!1},d(l){l&&g(t),T(n,l)}}}function yl(r){let e,t=[],n=new Map,s,i,l,o,a=r[2];const c=u=>u[11].id;for(let u=0;u<a.length;u+=1){let f=Ut(r,a,u),h=c(f);n.set(h,t[u]=Wt(h,f))}return{c(){e=k("div");for(let u=0;u<t.length;u+=1)t[u].c();this.h()},l(u){e=C(u,"DIV",{class:!0,style:!0,role:!0});var f=v(e);for(let h=0;h<t.length;h+=1)t[h].l(f);f.forEach(g),this.h()},h(){d(e,"class",s="toaster "+(r[1]||"")+" svelte-1phplh9"),d(e,"style",r[0]),d(e,"role","alert")},m(u,f){w(u,e,f);for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(e,null);i=!0,l||(o=[x(e,"mouseenter",r[4].startPause),x(e,"mouseleave",r[4].endPause)],l=!0)},p(u,[f]){f&20&&(a=u[2],X(),t=ft(t,f,c,1,u,a,n,e,dn,Wt,null,Ut),Y()),(!i||f&2&&s!==(s="toaster "+(u[1]||"")+" svelte-1phplh9"))&&d(e,"class",s),(!i||f&1)&&d(e,"style",u[0])},i(u){if(!i){for(let f=0;f<a.length;f+=1)p(t[f]);i=!0}},o(u){for(let f=0;f<t.length;f+=1)y(t[f]);i=!1},d(u){u&&g(e);for(let f=0;f<t.length;f+=1)t[f].d();l=!1,Le(o)}}}function wl(r,e,t){let n,{reverseOrder:s=!1}=e,{position:i="top-center"}=e,{toastOptions:l=void 0}=e,{gutter:o=8}=e,{containerStyle:a=void 0}=e,{containerClassName:c=void 0}=e;const{toasts:u,handlers:f}=zi(l);R(r,u,b=>t(9,n=b));let h;const m=(b,E)=>f.updateHeight(b.id,E);return r.$$set=b=>{"reverseOrder"in b&&t(5,s=b.reverseOrder),"position"in b&&t(6,i=b.position),"toastOptions"in b&&t(7,l=b.toastOptions),"gutter"in b&&t(8,o=b.gutter),"containerStyle"in b&&t(0,a=b.containerStyle),"containerClassName"in b&&t(1,c=b.containerClassName)},r.$$.update=()=>{r.$$.dirty&864&&t(2,h=n.map(b=>({...b,position:b.position||i,offset:f.calculateOffset(b,n,{reverseOrder:s,gutter:o,defaultPosition:i})})))},[a,c,h,u,f,s,i,l,o,n,m]}class Ll extends P{constructor(e){super(),B(this,e,wl,yl,N,{reverseOrder:5,position:6,toastOptions:7,gutter:8,containerStyle:0,containerClassName:1})}}const Hn=(r,e,t)=>{const{loading:n,success:s}=t;oe.promise(r,{loading:n,success:s,error:()=>e})},kl=r=>JSON.stringify({geojson:r,name:_e.retrieve().name}),zn=async()=>{const r=wn();dt(r),_n();const e=kl(r);let t=Pt;const n=new Promise(async(s,i)=>{try{const l=await cr(e,Ne.geojsonEndpoint);if(!l.ok)throw l.statusText&&(t=Pt),new Error;const o=await l.json();s()}catch{i()}});ce.saving.disable(),pn(),Hn(n,t,ur)},jn=()=>{ce.saving.retrieve()&&(fr()&&zn(),ce.saving.disable())},Vn=r=>{ye.getName()!==r.name&&(jn(),ce.saving.disable(),ce.samMaskRequest.disable(),ye.set(r),Bn())},Cl=r=>{const e=r.getBounds();$.retrieve().fitBounds(e)};function El(){const r=se(0),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n)}}const Me=El(),Il=(r,e)=>{if(r<0)return;const t=Sl(r);Me.set(t),Ml(e)},Sl=r=>Math.floor(r/ge)*ge,Ml=r=>{const e=document.getElementById("image-selector"),t=document.getElementById(r);!e||!t||t.scrollIntoView({behavior:"smooth"})},Rn=()=>{const r=$.retrieve();r&&ee.init(r)},qn=()=>{const r=$.retrieve();r&&(mr(),ee.remove(r))},Al=()=>{qn(),Rn()},Tl=r=>{dt(r),Pn(r)},Pl=async()=>{var i;const r=Be.retrieve();Te.markAnnotationsAsLoading();const e=(i=_e.retrieve())==null?void 0:i.name;if(!e)return;const t=r+Ne.geojsonEndpoint+"/"+e,n=await fetch(t);if(!n.ok)return;const s=await n.json();if(!s.status_code)return s},st=async r=>{const e=_e.retrieve().name;if(r.name===e)return;jn(),ce.saving.disable(),ce.samMaskRequest.disable(),_e.store(r),bt(),Al(),ke.empty(),Ke.empty();const t=await Pl();Te.markAnnotationsAsLoaded(),!(!t||!t.features)&&Tl(t)},Bl=r=>{if(!r.length)return;const e=Nl(r),t=Dl(e,r);return Ol(t)},Nl=r=>r.map(t=>{const n=t.bbox,s=L.latLng(n[1],n[0]),i=L.latLng(n[3],n[2]);return L.latLngBounds(s,i)}),Dl=(r,e)=>r.map((t,n)=>L.rectangle(t,{color:"blue",weight:2,fillOpacity:0}).on("click",()=>{var s;st(e[n]),Vn(Gn),Il(n,(s=e[n])==null?void 0:s.name)})),Ol=r=>{const e=$.retrieve(),t=L.featureGroup(r).addTo(e);return Q(rt)&&Cl(t),t};function Hl(r){let e,t,n,s,i,l,o,a,c,u,f,h,m,b,E,z,F,G;return t=new gt({props:{labelAction:Ye}}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),i=k("label"),l=k("input"),o=O(),a=k("span"),c=W("Zoom out on Quick selection"),u=O(),f=k("label"),h=k("input"),m=O(),b=k("span"),E=W("Zoom in on selecting image"),this.h()},l(q){e=C(q,"SECTION",{class:!0});var ie=v(e);D(t.$$.fragment,ie),n=H(ie),s=C(ie,"DIV",{class:!0});var re=v(s);i=C(re,"LABEL",{class:!0,for:!0});var pe=v(i);l=C(pe,"INPUT",{type:!0,id:!0,class:!0}),o=H(pe),a=C(pe,"SPAN",{class:!0});var fe=v(a);c=Z(fe,"Zoom out on Quick selection"),fe.forEach(g),pe.forEach(g),u=H(re),f=C(re,"LABEL",{class:!0,for:!0});var me=v(f);h=C(me,"INPUT",{type:!0,id:!0,class:!0}),m=H(me),b=C(me,"SPAN",{class:!0});var Ee=v(b);E=Z(Ee,"Zoom in on selecting image"),Ee.forEach(g),me.forEach(g),re.forEach(g),ie.forEach(g),this.h()},h(){d(l,"type","checkbox"),d(l,"id","zoom-out"),d(l,"class","checkbox checkbox-info"),d(a,"class","label-text text-gray-600"),d(i,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),d(i,"for","zoom-out"),d(h,"type","checkbox"),d(h,"id","zoom-in"),d(h,"class","checkbox checkbox-info"),d(b,"class","label-text text-gray-600"),d(f,"class","label cursor-pointer flex justify-start gap-5 text-slate-400"),d(f,"for","zoom-in"),d(s,"class","form-control"),d(e,"class","flex-1 flex flex-col justify-between")},m(q,ie){w(q,e,ie),A(t,e,null),_(e,n),_(e,s),_(s,i),_(i,l),l.checked=r[0],_(i,o),_(i,a),_(a,c),_(s,u),_(s,f),_(f,h),h.checked=r[1],_(f,m),_(f,b),_(b,E),z=!0,F||(G=[x(l,"change",r[3]),x(h,"change",r[4])],F=!0)},p(q,[ie]){ie&1&&(l.checked=q[0]),ie&2&&(h.checked=q[1])},i(q){z||(p(t.$$.fragment,q),z=!0)},o(q){y(t.$$.fragment,q),z=!1},d(q){q&&g(e),T(t),F=!1,Le(G)}}}function zl(r,e,t){let n,s,i;R(r,Xe,c=>t(2,n=c)),R(r,rt,c=>t(0,s=c)),R(r,nt,c=>t(1,i=c));let l=[];we(()=>{l.clearLayers&&(l==null||l.clearLayers())});function o(){s=this.checked,rt.set(s)}function a(){i=this.checked,nt.set(i)}return r.$$.update=()=>{r.$$.dirty&4&&n.length&&(l=Bl(n))},[s,i,n,o,a]}class jl extends P{constructor(e){super(),B(this,e,zl,Hl,N,{})}}function Vl(r){let e,t;return e=new gt({props:{labelAction:Ye}}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},p:S,i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}class Fn extends P{constructor(e){super(),B(this,e,null,Vl,N,{})}}function Zt(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function Qt(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function Rl(r){let e,t,n,s=r[7]&&Zt(r),i=r[6]&&Qt(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M20.71,4.63L19.37,3.29C19,2.9 18.35,2.9 17.96,3.29L9,12.25L11.75,15L20.71,6.04C21.1,5.65 21.1,5 20.71,4.63M7,14A3,3 0 0,0 4,17C4,18.31 2.84,19 2,19C2.92,20.22 4.5,21 6,21A4,4 0 0,0 10,17A3,3 0 0,0 7,14Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Zt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Qt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function ql(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class Fl extends P{constructor(e){super(),B(this,e,ql,Rl,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Jt(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function Kt(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function Gl(r){let e,t,n,s=r[7]&&Jt(r),i=r[6]&&Kt(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M12,8A4,4 0 0,1 16,12A4,4 0 0,1 12,16A4,4 0 0,1 8,12A4,4 0 0,1 12,8M12,10A2,2 0 0,0 10,12A2,2 0 0,0 12,14A2,2 0 0,0 14,12A2,2 0 0,0 12,10M10,22C9.75,22 9.54,21.82 9.5,21.58L9.13,18.93C8.5,18.68 7.96,18.34 7.44,17.94L4.95,18.95C4.73,19.03 4.46,18.95 4.34,18.73L2.34,15.27C2.21,15.05 2.27,14.78 2.46,14.63L4.57,12.97L4.5,12L4.57,11L2.46,9.37C2.27,9.22 2.21,8.95 2.34,8.73L4.34,5.27C4.46,5.05 4.73,4.96 4.95,5.05L7.44,6.05C7.96,5.66 8.5,5.32 9.13,5.07L9.5,2.42C9.54,2.18 9.75,2 10,2H14C14.25,2 14.46,2.18 14.5,2.42L14.87,5.07C15.5,5.32 16.04,5.66 16.56,6.05L19.05,5.05C19.27,4.96 19.54,5.05 19.66,5.27L21.66,8.73C21.79,8.95 21.73,9.22 21.54,9.37L19.43,11L19.5,12L19.43,13L21.54,14.63C21.73,14.78 21.79,15.05 21.66,15.27L19.66,18.73C19.54,18.95 19.27,19.04 19.05,18.95L16.56,17.95C16.04,18.34 15.5,18.68 14.87,18.93L14.5,21.58C14.46,21.82 14.25,22 14,22H10M11.25,4L10.88,6.61C9.68,6.86 8.62,7.5 7.85,8.39L5.44,7.35L4.69,8.65L6.8,10.2C6.4,11.37 6.4,12.64 6.8,13.8L4.68,15.36L5.43,16.66L7.86,15.62C8.63,16.5 9.68,17.14 10.87,17.38L11.24,20H12.76L13.13,17.39C14.32,17.14 15.37,16.5 16.14,15.62L18.57,16.66L19.32,15.36L17.2,13.81C17.6,12.64 17.6,11.37 17.2,10.2L19.31,8.65L18.56,7.35L16.15,8.39C15.38,7.5 14.32,6.86 13.12,6.62L12.75,4H11.25Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Jt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Kt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function Ul(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class Wl extends P{constructor(e){super(),B(this,e,Ul,Gl,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function Xt(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function Yt(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function Zl(r){let e,t,n,s=r[7]&&Xt(r),i=r[6]&&Yt(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M9.37 4L10.78 6.5L9.37 9H6.63L5.23 6.5L6.63 4H9.37M10.25 2H5.75C5.56 2 5.39 2.11 5.31 2.26L3.09 6.22L3 6.5L3.09 6.78L5.31 10.74C5.39 10.89 5.56 11 5.75 11H10.25C10.44 11 10.61 10.89 10.69 10.74L12.91 6.78L13 6.5L12.91 6.22L10.69 2.26C10.61 2.11 10.44 2 10.25 2M18.62 9.5L20 12L18.62 14.5H15.88L14.5 12L15.88 9.5H18.62M19.5 7.5H15C14.81 7.5 14.64 7.61 14.56 7.76L12.34 11.72L12.25 12L12.34 12.28L14.56 16.24C14.64 16.39 14.81 16.5 15 16.5H19.5C19.69 16.5 19.86 16.39 19.94 16.24L22.16 12.28L22.25 12L22.16 11.72L19.94 7.76C19.86 7.61 19.69 7.5 19.5 7.5M9.37 15L10.78 17.5L9.37 20H6.63L5.23 17.5L6.63 15H9.37M10.25 13H5.75C5.56 13 5.39 13.11 5.31 13.26L3.09 17.22L3 17.5L3.09 17.78L5.31 21.74C5.39 21.89 5.56 22 5.75 22H10.25C10.44 22 10.61 21.89 10.69 21.74L12.91 17.78L13 17.5L12.91 17.22L10.69 13.26C10.61 13.11 10.44 13 10.25 13Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=Xt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=Yt(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function Ql(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class Jl extends P{constructor(e){super(),B(this,e,Ql,Zl,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function xt(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function $t(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function Kl(r){let e,t,n,s=r[7]&&xt(r),i=r[6]&&$t(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M12,1C7.59,1 4,4.59 4,9C4,14.57 10.96,22.34 11.26,22.67L12,23.5L12.74,22.67C13.04,22.34 20,14.57 20,9C20,4.59 16.41,1 12,1M12,20.47C9.82,17.86 6,12.54 6,9A6,6 0 0,1 12,3A6,6 0 0,1 18,9C18,12.83 13.75,18.36 12,20.47M11.13,14H12.88V15.75H11.13M12,5A3.5,3.5 0 0,0 8.5,8.5H10.25A1.75,1.75 0 0,1 12,6.75A1.75,1.75 0 0,1 13.75,8.5C13.75,10.26 11.13,10.04 11.13,12.88H12.88C12.88,10.91 15.5,10.69 15.5,8.5A3.5,3.5 0 0,0 12,5Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=xt(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=$t(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function Xl(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class Yl extends P{constructor(e){super(),B(this,e,Xl,Kl,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}function en(r){let e,t;return{c(){e=J("desc"),t=W(r[7])},l(n){e=K(n,"desc",{});var s=v(e);t=Z(s,r[7]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&128&&te(t,n[7])},d(n){n&&g(e)}}}function tn(r){let e,t;return{c(){e=J("title"),t=W(r[6])},l(n){e=K(n,"title",{});var s=v(e);t=Z(s,r[6]),s.forEach(g)},m(n,s){w(n,e,s),_(e,t)},p(n,s){s&64&&te(t,n[6])},d(n){n&&g(e)}}}function xl(r){let e,t,n,s=r[7]&&en(r),i=r[6]&&tn(r);return{c(){e=J("svg"),s&&s.c(),t=j(),i&&i.c(),n=J("path"),this.h()},l(l){e=K(l,"svg",{viewBox:!0,width:!0,height:!0,class:!0,"aria-label":!0,"aria-hidden":!0});var o=v(e);s&&s.l(o),t=j(),i&&i.l(o),n=K(o,"path",{d:!0,fill:!0}),v(n).forEach(g),o.forEach(g),this.h()},h(){d(n,"d","M21.41,11.58L12.41,2.58C12.04,2.21 11.53,2 11,2H4A2,2 0 0,0 2,4V11C2,11.53 2.21,12.04 2.59,12.41L3,12.81C3.9,12.27 4.94,12 6,12A6,6 0 0,1 12,18C12,19.06 11.72,20.09 11.18,21L11.58,21.4C11.95,21.78 12.47,22 13,22C13.53,22 14.04,21.79 14.41,21.41L21.41,14.41C21.79,14.04 22,13.53 22,13C22,12.47 21.79,11.96 21.41,11.58M5.5,7A1.5,1.5 0 0,1 4,5.5A1.5,1.5 0 0,1 5.5,4A1.5,1.5 0 0,1 7,5.5A1.5,1.5 0 0,1 5.5,7M10,19H7V22H5V19H2V17H5V14H7V17H10V19Z"),d(n,"fill",r[2]),d(e,"viewBox",r[3]),d(e,"width",r[0]),d(e,"height",r[1]),d(e,"class",r[8]),d(e,"aria-label",r[4]),d(e,"aria-hidden",r[5])},m(l,o){w(l,e,o),s&&s.m(e,null),_(e,t),i&&i.m(e,null),_(e,n)},p(l,[o]){l[7]?s?s.p(l,o):(s=en(l),s.c(),s.m(e,t)):s&&(s.d(1),s=null),l[6]?i?i.p(l,o):(i=tn(l),i.c(),i.m(e,n)):i&&(i.d(1),i=null),o&4&&d(n,"fill",l[2]),o&8&&d(e,"viewBox",l[3]),o&1&&d(e,"width",l[0]),o&2&&d(e,"height",l[1]),o&256&&d(e,"class",l[8]),o&16&&d(e,"aria-label",l[4]),o&32&&d(e,"aria-hidden",l[5])},i:S,o:S,d(l){l&&g(e),s&&s.d(),i&&i.d()}}}function $l(r,e,t){let{size:n="1em"}=e,{width:s=n}=e,{height:i=n}=e,{color:l="currentColor"}=e,{viewBox:o="0 0 24 24"}=e,{ariaLabel:a=void 0}=e,{ariaHidden:c=void 0}=e,{title:u=void 0}=e,{desc:f=void 0}=e,{class:h=void 0}=e;return r.$$set=m=>{"size"in m&&t(9,n=m.size),"width"in m&&t(0,s=m.width),"height"in m&&t(1,i=m.height),"color"in m&&t(2,l=m.color),"viewBox"in m&&t(3,o=m.viewBox),"ariaLabel"in m&&t(4,a=m.ariaLabel),"ariaHidden"in m&&t(5,c=m.ariaHidden),"title"in m&&t(6,u=m.title),"desc"in m&&t(7,f=m.desc),"class"in m&&t(8,h=m.class)},[s,i,l,o,a,c,u,f,h,n]}class eo extends P{constructor(e){super(),B(this,e,$l,xl,N,{size:9,width:0,height:1,color:2,viewBox:3,ariaLabel:4,ariaHidden:5,title:6,desc:7,class:8})}}const to={name:"Segmentation",icon:Fl,component:Fn,control:$s,usesLabels:!0},no={name:"Quick Selection",icon:Jl,component:jl,usesLabels:!0},Gn={name:"Classification",icon:eo,component:js,usesLabels:!0},ro={name:"Detection",icon:Yl,component:Fn,control:Ws,usesLabels:!0},so={name:"Options",icon:Wl,component:wi},it=[no,Gn,to,ro,so];function io(){const r=se(it[0]),{subscribe:e,set:t}=r;return{subscribe:e,set:n=>t(n),getName:()=>Q(r).name}}const ye=io();function lo(r){let e,t,n=r[0].name+"",s;return{c(){e=k("header"),t=k("h2"),s=W(n),this.h()},l(i){e=C(i,"HEADER",{class:!0});var l=v(e);t=C(l,"H2",{});var o=v(t);s=Z(o,n),o.forEach(g),l.forEach(g),this.h()},h(){d(e,"class","w-full bg-info py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-t-md justify-center")},m(i,l){w(i,e,l),_(e,t),_(t,s)},p(i,[l]){l&1&&n!==(n=i[0].name+"")&&te(s,n)},i:S,o:S,d(i){i&&g(e)}}}function oo(r,e,t){let n;return R(r,ye,s=>t(0,n=s)),[n]}class ao extends P{constructor(e){super(),B(this,e,oo,lo,N,{})}}function co(r){let e,t,n,s,i,l;return{c(){e=k("button"),t=W("Save"),this.h()},l(o){e=C(o,"BUTTON",{class:!0});var a=v(e);t=Z(a,"Save"),a.forEach(g),this.h()},h(){d(e,"class",n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!r[0].saving&&" bg-slate-400 hover:bg-slate-400")),e.disabled=s=!r[0].saving},m(o,a){w(o,e,a),_(e,t),i||(l=x(e,"click",r[1]),i=!0)},p(o,[a]){a&1&&n!==(n="w-full bg-action hover:bg-hover py-2 px-3 text-white text-lg flex gap-5 items-center flex-row rounded-b-md justify-center border-b "+(!o[0].saving&&" bg-slate-400 hover:bg-slate-400"))&&d(e,"class",n),a&1&&s!==(s=!o[0].saving)&&(e.disabled=s)},i:S,o:S,d(o){o&&g(e),i=!1,l()}}}function uo(r,e,t){let n;return R(r,ce,i=>t(0,n=i)),[n,()=>zn()]}class fo extends P{constructor(e){super(),B(this,e,uo,co,N,{})}}function nn(r,e,t){const n=r.slice();return n[3]=e[t],n}function rn(r){let e,t,n,s,i,l,o;var a=r[3].icon;function c(f){return{props:{size:f[1]}}}a&&(t=de(a,c(r)));function u(){return r[2](r[3])}return{c(){e=k("button"),t&&M(t.$$.fragment),n=O(),this.h()},l(f){e=C(f,"BUTTON",{class:!0,"aria-label":!0});var h=v(e);t&&D(t.$$.fragment,h),n=H(h),h.forEach(g),this.h()},h(){d(e,"class",s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`),d(e,"aria-label",r[3].name)},m(f,h){w(f,e,h),t&&A(t,e,null),_(e,n),i=!0,l||(o=x(e,"click",u),l=!0)},p(f,h){if(r=f,a!==(a=r[3].icon)){if(t){X();const m=t;y(m.$$.fragment,1,0,()=>{T(m,1)}),Y()}a?(t=de(a,c(r)),M(t.$$.fragment),p(t.$$.fragment,1),A(t,e,n)):t=null}(!i||h&1&&s!==(s=`btn btn-primary px-2 rounded-none 
			${r[3].name===r[0].name&&"btn-active"}
			`))&&d(e,"class",s)},i(f){i||(t&&p(t.$$.fragment,f),i=!0)},o(f){t&&y(t.$$.fragment,f),i=!1},d(f){f&&g(e),t&&T(t),l=!1,o()}}}function mo(r){let e,t,n=it,s=[];for(let l=0;l<n.length;l+=1)s[l]=rn(nn(r,n,l));const i=l=>y(s[l],1,1,()=>{s[l]=null});return{c(){e=k("div");for(let l=0;l<s.length;l+=1)s[l].c();this.h()},l(l){e=C(l,"DIV",{class:!0});var o=v(e);for(let a=0;a<s.length;a+=1)s[a].l(o);o.forEach(g),this.h()},h(){d(e,"class","col-span-1 bg-slate-100 flex flex-col items-centergap-3")},m(l,o){w(l,e,o);for(let a=0;a<s.length;a+=1)s[a]&&s[a].m(e,null);t=!0},p(l,[o]){if(o&3){n=it;let a;for(a=0;a<n.length;a+=1){const c=nn(l,n,a);s[a]?(s[a].p(c,o),p(s[a],1)):(s[a]=rn(c),s[a].c(),p(s[a],1),s[a].m(e,null))}for(X(),a=n.length;a<s.length;a+=1)i(a);Y()}},i(l){if(!t){for(let o=0;o<n.length;o+=1)p(s[o]);t=!0}},o(l){s=s.filter(Boolean);for(let o=0;o<s.length;o+=1)y(s[o]);t=!1},d(l){l&&g(e),Zn(s,l)}}}function ho(r,e,t){let n;return R(r,ye,l=>t(0,n=l)),[n,dr,l=>Vn(l)]}class go extends P{constructor(e){super(),B(this,e,ho,mo,N,{})}}const bo=async()=>{const r=Be.retrieve(),e=await fetch(r+Ne.imagesEndpoint);if(!e.ok)return;const t=await e.json(),n=t.sort((s,i)=>s.name.localeCompare(i.name,navigator.languages[0]||navigator.language,{numeric:!0,ignorePunctuation:!0}));return Xe.store(n),t},_o=async()=>{const r=Be.retrieve(),e=await fetch(r+Ne.labelsEndpoint);if(!e.ok)return;const t=await e.json();if(!t.status_code){const{labels:n}=t;n.length&&po(n)}},po=r=>{for(let t of r)be.add(t);const e=be.retrieve();ue.store(e[0])},vo=async()=>{_n(),hr(),await _o(),Te.markLabelsAsLoaded();const r=new Promise(async(t,n)=>{try{if(await bo(),Te.markImagesAsLoaded(),Xe.retrieve().length===0)throw new Error;t()}catch{n()}});Hn(r,"No images found.",gr),r.finally(()=>pn())};function yo(r,e,t){let n;return R(r,$,s=>t(0,n=s)),Rn(),we(()=>{n&&qn()}),[]}class wo extends P{constructor(e){super(),B(this,e,yo,null,N,{})}}let Ge;function Lo(){Ge=new IntersectionObserver(r=>{r.forEach(e=>{const t=e.isIntersecting?"enterViewport":"exitViewport";e.target.dispatchEvent(new CustomEvent(t))})})}function ko(r){return Ge||Lo(),Ge.observe(r),{destroy(){Ge.unobserve(r)}}}function sn(r,e,t){const n=r.slice();return n[12]=e[t],n[14]=t,n}function ln(r){let e,t,n=`${r[1]+1}-${r[1]+ge<r[0].length?r[1]+ge:r[0].length} of ${r[0].length}`,s,i,l,o=[],a=new Map,c,u,f=r[2];const h=m=>m[12].name;for(let m=0;m<f.length;m+=1){let b=sn(r,f,m),E=h(b);a.set(E,o[m]=on(E,b))}return{c(){e=k("div"),t=k("span"),s=W(n),i=O(),l=k("ul");for(let m=0;m<o.length;m+=1)o[m].c();this.h()},l(m){e=C(m,"DIV",{class:!0});var b=v(e);t=C(b,"SPAN",{class:!0,"aria-label":!0});var E=v(t);s=Z(E,n),E.forEach(g),i=H(b),l=C(b,"UL",{class:!0,id:!0});var z=v(l);for(let F=0;F<o.length;F+=1)o[F].l(z);z.forEach(g),b.forEach(g),this.h()},h(){d(t,"class","px-2 text-gray-500 text-sm mt-5 flex justify-end"),d(t,"aria-label","Pagination information"),d(l,"class","w-full justify-end overflow-y-auto block"),d(l,"id","image-selector"),d(e,"class","flex-1 overflow-y-auto")},m(m,b){w(m,e,b),_(e,t),_(t,s),_(e,i),_(e,l);for(let E=0;E<o.length;E+=1)o[E]&&o[E].m(l,null);c||(u=x(l,"scroll",r[8]),c=!0)},p(m,b){b&3&&n!==(n=`${m[1]+1}-${m[1]+ge<m[0].length?m[1]+ge:m[0].length} of ${m[0].length}`)&&te(s,n),b&28&&(f=m[2],o=ft(o,b,h,1,m,f,a,l,Qn,on,null,sn))},d(m){m&&g(e);for(let b=0;b<o.length;b+=1)o[b].d();c=!1,u()}}}function on(r,e){let t,n,s=e[12].name+"",i,l,o,a,c,u;return{key:r,first:null,c(){t=k("li"),n=k("button"),i=W(s),o=O(),this.h()},l(f){t=C(f,"LI",{id:!0});var h=v(t);n=C(h,"BUTTON",{class:!0});var m=v(n);i=Z(m,s),m.forEach(g),o=H(h),h.forEach(g),this.h()},h(){d(n,"class",l=`max-h-7 tab text-xs ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`),d(t,"id",a=e[12].name.split("/").pop()),this.first=t},m(f,h){w(f,t,h),_(t,n),_(n,i),_(t,o),c||(u=[x(n,"click",function(){St(st(e[12]))&&st(e[12]).apply(this,arguments)}),Jn(ko.call(null,t)),x(t,"enterViewport",function(){St((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14]))&&((e[14]===e[2].length-1||e[14]===0)&&e[4](e[14])).apply(this,arguments)})],c=!0)},p(f,h){e=f,h&4&&s!==(s=e[12].name+"")&&te(i,s),h&12&&l!==(l=`max-h-7 tab text-xs ${e[12].name===e[3].name&&"text-[#202124] bg-lightgray"} w-full justify-between pl-2 pr-0 hover:text-[#2576E8]`)&&d(n,"class",l),h&4&&a!==(a=e[12].name.split("/").pop())&&d(t,"id",a)},d(f){f&&g(t),c=!1,Le(u)}}}function Co(r){let e,t=r[2].length&&ln(r);return{c(){t&&t.c(),e=j()},l(n){t&&t.l(n),e=j()},m(n,s){t&&t.m(n,s),w(n,e,s)},p(n,[s]){n[2].length?t?t.p(n,s):(t=ln(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:S,o:S,d(n){t&&t.d(n),n&&g(e)}}}function Eo(r,e,t){let n,s,i,l,o;R(r,Me,E=>t(1,i=E)),R(r,Xe,E=>t(7,l=E)),R(r,_e,E=>t(3,o=E));let{filterInput:a=""}=e;function c(E){E===0&&m(),E!==n.length-1&&E===s.length-1&&u()}function u(){Ve(Me,i+=ge/4,i),t(2,s=n.slice(i,i+ge))}let f=!1;const h=()=>{f=!0};async function m(){if(!f||i===0)return;f=!1;const E=document.getElementById(s[0].name.split("/").pop());Ve(Me,i-=ge/4,i),i<0&&Ve(Me,i=0,i),t(2,s=n.slice(i,i+ge)),await ut(),E.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})}const b=()=>h();return r.$$set=E=>{"filterInput"in E&&t(6,a=E.filterInput)},r.$$.update=()=>{r.$$.dirty&192&&t(0,n=l.length?l.filter(E=>E.name.toLowerCase().includes(a.toLowerCase())):[]),r.$$.dirty&64&&a&&Ve(Me,i=0,i),r.$$.dirty&3&&t(2,s=n.slice(i,i+ge))},[n,i,s,o,c,h,a,l,b]}class Io extends P{constructor(e){super(),B(this,e,Eo,Co,N,{filterInput:6})}}function So(r){let e,t,n,s,i,l,o,a,c;function u(h){r[1](h)}let f={};return r[0]!==void 0&&(f.filterInput=r[0]),t=new Io({props:f}),hn.push(()=>Kn(t,"filterInput",u)),{c(){e=k("section"),M(t.$$.fragment),s=O(),i=k("form"),l=k("input"),this.h()},l(h){e=C(h,"SECTION",{class:!0,"aria-label":!0});var m=v(e);D(t.$$.fragment,m),s=H(m),i=C(m,"FORM",{class:!0});var b=v(i);l=C(b,"INPUT",{name:!0,type:!0,placeholder:!0,class:!0}),b.forEach(g),m.forEach(g),this.h()},h(){d(l,"name","filter"),d(l,"type","text"),d(l,"placeholder","Filter..."),d(l,"class","input input-bordered rounded-md w-full"),d(i,"class","flex flex-col justify-end mt-5"),d(e,"class","flex-1 flex flex-col max-h-[40vh]"),d(e,"aria-label","Image selector")},m(h,m){w(h,e,m),A(t,e,null),_(e,s),_(e,i),_(i,l),ve(l,r[0]),o=!0,a||(c=[x(l,"input",r[2]),x(i,"submit",gn(Mo))],a=!0)},p(h,[m]){const b={};!n&&m&1&&(n=!0,b.filterInput=h[0],Xn(()=>n=!1)),t.$set(b),m&1&&l.value!==h[0]&&ve(l,h[0])},i(h){o||(p(t.$$.fragment,h),o=!0)},o(h){y(t.$$.fragment,h),o=!1},d(h){h&&g(e),T(t),a=!1,Le(c)}}}const Mo=()=>{};function Ao(r,e,t){let n="";function s(l){n=l,t(0,n)}function i(){n=this.value,t(0,n)}return[n,s,i]}class To extends P{constructor(e){super(),B(this,e,Ao,So,N,{})}}const Po=(r,e)=>{r&&(Bo(r,e)||(No(r,e),Ye({name:r,color:e}),yn()))},Bo=(r,e)=>{const t=be.retrieve(),n=t.some(i=>i.name===r),s=t.some(i=>i.color===e);return n?(oe.error(`The label "${r}" already exists`),!0):s?(oe.error("A label with this color already exists"),!0):!1},No=(r,e)=>{be.add({name:r,color:e})};function Do(r){let e,t,n,s,i,l,o,a,c,u,f,h,m;return{c(){e=k("form"),t=k("label"),n=k("input"),s=O(),i=k("button"),l=W("+"),o=O(),a=k("div"),c=k("input"),this.h()},l(b){e=C(b,"FORM",{});var E=v(e);t=C(E,"LABEL",{type:!0,name:!0,class:!0});var z=v(t);n=C(z,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0,autocomplete:!0}),s=H(z),i=C(z,"BUTTON",{class:!0});var F=v(i);l=Z(F,"+"),F.forEach(g),o=H(z),a=C(z,"DIV",{class:!0,style:!0});var G=v(a);c=C(G,"INPUT",{type:!0,name:!0,class:!0,style:!0}),G.forEach(g),z.forEach(g),E.forEach(g),this.h()},h(){d(n,"type","text"),d(n,"name","name"),d(n,"placeholder","New label"),d(n,"class","input input-bordered w-full rounded-none rounded-l-md border-r-0 focus:outline-none focus:placeholder-gray-300 focus:border-gray-600 focus:border-r-0"),d(n,"autocomplete","off"),d(i,"class","btn btn-neutral text-white font-bold text-2xl px-2 rounded-none"),d(c,"type","color"),d(c,"name","color"),d(c,"class","h-auto box-border"),d(c,"style",u=`opacity: ${r[2]};`),d(a,"class","flex box-border"),d(a,"style",f=`border: 1px solid ${r[1]}; 	border-radius: 0px 6px 6px 0px;`),d(t,"type","text"),d(t,"name","New label"),d(t,"class","flex")},m(b,E){w(b,e,E),_(e,t),_(t,n),ve(n,r[0]),_(t,s),_(t,i),_(i,l),_(t,o),_(t,a),_(a,c),ve(c,r[1]),h||(m=[x(n,"input",r[5]),x(c,"input",r[6]),x(e,"submit",gn(r[3]))],h=!0)},p(b,[E]){E&1&&n.value!==b[0]&&ve(n,b[0]),E&4&&u!==(u=`opacity: ${b[2]};`)&&d(c,"style",u),E&2&&ve(c,b[1]),E&2&&f!==(f=`border: 1px solid ${b[1]}; 	border-radius: 0px 6px 6px 0px;`)&&d(a,"style",f)},i:S,o:S,d(b){b&&g(e),h=!1,Le(m)}}}function Oo(r,e,t){let n,s,i;R(r,ae,f=>t(4,s=f)),R(r,be,f=>t(7,i=f));let l=br,o=_r;const a=()=>{const f=i.length;Po(l,o),f+1===i.length&&t(0,l="")};function c(){l=this.value,t(0,l)}function u(){o=this.value,t(1,o)}return r.$$.update=()=>{r.$$.dirty&16&&t(2,{opacity:n}=s,n)},[l,o,n,a,s,c,u]}class Ho extends P{constructor(e){super(),B(this,e,Oo,Do,N,{})}}function an(r){let e,t;return e=new wo({}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function cn(r){let e,t,n,s,i=r[1].usesLabels&&un();var l=r[1].component;function o(a){return{}}return l&&(n=de(l,o())),{c(){e=k("div"),i&&i.c(),t=O(),n&&M(n.$$.fragment),this.h()},l(a){e=C(a,"DIV",{class:!0});var c=v(e);i&&i.l(c),t=H(c),n&&D(n.$$.fragment,c),c.forEach(g),this.h()},h(){d(e,"class","flex-1 flex flex-col")},m(a,c){w(a,e,c),i&&i.m(e,null),_(e,t),n&&A(n,e,null),s=!0},p(a,c){if(a[1].usesLabels?i?c&2&&p(i,1):(i=un(),i.c(),p(i,1),i.m(e,t)):i&&(X(),y(i,1,1,()=>{i=null}),Y()),c&2&&l!==(l=a[1].component)){if(n){X();const u=n;y(u.$$.fragment,1,0,()=>{T(u,1)}),Y()}l?(n=de(l,o()),M(n.$$.fragment),p(n.$$.fragment,1),A(n,e,null)):n=null}},i(a){s||(p(i),n&&p(n.$$.fragment,a),s=!0)},o(a){y(i),n&&y(n.$$.fragment,a),s=!1},d(a){a&&g(e),i&&i.d(),n&&T(n)}}}function un(r){let e,t;return e=new Ho({}),{c(){M(e.$$.fragment)},l(n){D(e.$$.fragment,n)},m(n,s){A(e,n,s),t=!0},i(n){t||(p(e.$$.fragment,n),t=!0)},o(n){y(e.$$.fragment,n),t=!1},d(n){T(e,n)}}}function fn(r){let e,t,n=!r[0].areAnnotationsLoading&&mn(r);return{c(){n&&n.c(),e=j()},l(s){n&&n.l(s),e=j()},m(s,i){n&&n.m(s,i),w(s,e,i),t=!0},p(s,i){s[0].areAnnotationsLoading?n&&(X(),y(n,1,1,()=>{n=null}),Y()):n?(n.p(s,i),i&1&&p(n,1)):(n=mn(s),n.c(),p(n,1),n.m(e.parentNode,e))},i(s){t||(p(n),t=!0)},o(s){y(n),t=!1},d(s){n&&n.d(s),s&&g(e)}}}function mn(r){let e,t,n;var s=r[1].control;function i(l){return{}}return s&&(e=de(s,i())),{c(){e&&M(e.$$.fragment),t=j()},l(l){e&&D(e.$$.fragment,l),t=j()},m(l,o){e&&A(e,l,o),w(l,t,o),n=!0},p(l,o){if(o&2&&s!==(s=l[1].control)){if(e){X();const a=e;y(a.$$.fragment,1,0,()=>{T(a,1)}),Y()}s?(e=de(s,i()),M(e.$$.fragment),p(e.$$.fragment,1),A(e,t.parentNode,t)):e=null}},i(l){n||(e&&p(e.$$.fragment,l),n=!0)},o(l){e&&y(e.$$.fragment,l),n=!1},d(l){l&&g(t),e&&T(e,l)}}}function zo(r){let e,t,n,s,i,l,o=!r[0].areImagesLoading&&!r[0].areLabelsLoading&&an(),a=r[1]&&cn(r),c=r[1].control&&fn(r);return i=new To({}),{c(){o&&o.c(),e=O(),t=k("div"),a&&a.c(),n=O(),c&&c.c(),s=O(),M(i.$$.fragment),this.h()},l(u){o&&o.l(u),e=H(u),t=C(u,"DIV",{class:!0});var f=v(t);a&&a.l(f),n=H(f),c&&c.l(f),s=H(f),D(i.$$.fragment,f),f.forEach(g),this.h()},h(){d(t,"class","p-5 w-[280px] flex flex-col justify-between")},m(u,f){o&&o.m(u,f),w(u,e,f),w(u,t,f),a&&a.m(t,null),_(t,n),c&&c.m(t,null),_(t,s),A(i,t,null),l=!0},p(u,[f]){!u[0].areImagesLoading&&!u[0].areLabelsLoading?o?f&1&&p(o,1):(o=an(),o.c(),p(o,1),o.m(e.parentNode,e)):o&&(X(),y(o,1,1,()=>{o=null}),Y()),u[1]?a?(a.p(u,f),f&2&&p(a,1)):(a=cn(u),a.c(),p(a,1),a.m(t,n)):a&&(X(),y(a,1,1,()=>{a=null}),Y()),u[1].control?c?(c.p(u,f),f&2&&p(c,1)):(c=fn(u),c.c(),p(c,1),c.m(t,s)):c&&(X(),y(c,1,1,()=>{c=null}),Y())},i(u){l||(p(o),p(a),p(c),p(i.$$.fragment,u),l=!0)},o(u){y(o),y(a),y(c),y(i.$$.fragment,u),l=!1},d(u){o&&o.d(u),u&&g(e),u&&g(t),a&&a.d(),c&&c.d(),T(i)}}}function jo(r,e,t){let n,s;return R(r,Te,i=>t(0,n=i)),R(r,ye,i=>t(1,s=i)),[n,s]}class Vo extends P{constructor(e){super(),B(this,e,jo,zo,N,{})}}function Ro(r){let e,t,n,s,i,l,o,a,c,u;return t=new ao({}),i=new go({}),o=new Vo({}),c=new fo({}),{c(){e=k("section"),M(t.$$.fragment),n=O(),s=k("div"),M(i.$$.fragment),l=O(),M(o.$$.fragment),a=O(),M(c.$$.fragment),this.h()},l(f){e=C(f,"SECTION",{class:!0,style:!0});var h=v(e);D(t.$$.fragment,h),n=H(h),s=C(h,"DIV",{class:!0});var m=v(s);D(i.$$.fragment,m),l=H(m),D(o.$$.fragment,m),m.forEach(g),a=H(h),D(c.$$.fragment,h),h.forEach(g),this.h()},h(){d(s,"class","grid grid-cols-8 h-full"),d(e,"class","fixed z-20 bg-[#fafdfe] flex flex-col m-6 rounded-md h-full w-[320px]"),U(e,"height","-webkit-fill-available")},m(f,h){w(f,e,h),A(t,e,null),_(e,n),_(e,s),A(i,s,null),_(s,l),A(o,s,null),_(e,a),A(c,e,null),u=!0},p:S,i(f){u||(p(t.$$.fragment,f),p(i.$$.fragment,f),p(o.$$.fragment,f),p(c.$$.fragment,f),u=!0)},o(f){y(t.$$.fragment,f),y(i.$$.fragment,f),y(o.$$.fragment,f),y(c.$$.fragment,f),u=!1},d(f){f&&g(e),T(t),T(i),T(o),T(c)}}}function qo(r,e,t){let n,s;return R(r,$,i=>t(0,n=i)),R(r,xn,i=>t(1,s=i)),r.$$.update=()=>{r.$$.dirty&3&&s.url.origin&&n&&vo()},[n,s]}class Fo extends P{constructor(e){super(),B(this,e,qo,Ro,N,{})}}function Go(r){let e,t,n,s;return e=new Fo({}),n=new Hr({}),{c(){M(e.$$.fragment),t=O(),M(n.$$.fragment)},l(i){D(e.$$.fragment,i),t=H(i),D(n.$$.fragment,i)},m(i,l){A(e,i,l),w(i,t,l),A(n,i,l),s=!0},i(i){s||(p(e.$$.fragment,i),p(n.$$.fragment,i),s=!0)},o(i){y(e.$$.fragment,i),y(n.$$.fragment,i),s=!1},d(i){T(e,i),i&&g(t),T(n,i)}}}function Uo(r){let e,t,n,s,i,l;e=new Ll({}),s=new Cr({});let o=Go();return{c(){M(e.$$.fragment),t=O(),n=k("main"),M(s.$$.fragment),i=O(),o&&o.c(),this.h()},l(a){D(e.$$.fragment,a),t=H(a),n=C(a,"MAIN",{class:!0});var c=v(n);D(s.$$.fragment,c),i=H(c),o&&o.l(c),c.forEach(g),this.h()},h(){d(n,"class","min-w-full relative min-h-full")},m(a,c){A(e,a,c),w(a,t,c),w(a,n,c),A(s,n,null),_(n,i),o&&o.m(n,null),l=!0},p:S,i(a){l||(p(e.$$.fragment,a),p(s.$$.fragment,a),p(o),l=!0)},o(a){y(e.$$.fragment,a),y(s.$$.fragment,a),y(o),l=!1},d(a){T(e,a),a&&g(t),a&&g(n),T(s),o&&o.d()}}}class Yo extends P{constructor(e){super(),B(this,e,null,Uo,N,{})}}export{Yo as component};
