import{a as oe,t as te}from"../chunks/disclose-version.BfD_MglS.js";import{ae as ie,af as j,Z as ne,w as K,h as re,p as ce,e as de,f as n,T as _,W as m,a7 as B,s as d,r as c,ag as g}from"../chunks/runtime.B004VIJJ.js";import{e as me}from"../chunks/events.D0jbzQKS.js";import{a as pe,r as u,m as ve}from"../chunks/models.svelte.BFjtdoQI.js";import{g as Q,i as ue,p as X}from"../chunks/proxy.DjSrSXEw.js";import{g as fe}from"../chunks/entry.BoRPlGCH.js";function W(e,t,a,r=a){e.addEventListener(t,a);const l=e.__on_r;l?e.__on_r=()=>{l(),r()}:e.__on_r=r,pe()}function A(e,t,a=t){var r=ie();W(e,"input",()=>{var l=le(e)?se(e.value):e.value;a(l),r&&l!==(l=t())&&(e.value=l??"")}),j(()=>{var l=t();if(re&&e.defaultValue!==e.value){a(e.value);return}le(e)&&l===se(e.value)||e.type==="date"&&!l&&!e.value||l!==e.value&&(e.value=l??"")})}const T=new Set;function U(e,t,a,r,l=r){var v=a.getAttribute("type")==="checkbox",s=e;let b=!1;if(t!==null)for(var f of t)s=s[f]??(s[f]=[]);s.push(a),W(a,"change",()=>{var o=a.__value;v&&(o=ae(s,o,a.checked)),l(o)},()=>l(v?[]:null)),j(()=>{var o=r();if(re&&a.defaultChecked!==a.checked){b=!0;return}v?(o=o||[],a.checked=Q(o).includes(Q(a.__value))):a.checked=ue(a.__value,o)}),ne(()=>{var o=s.indexOf(a);o!==-1&&s.splice(o,1)}),T.has(s)||(T.add(s),K(()=>{s.sort((o,p)=>o.compareDocumentPosition(p)===4?-1:1),T.delete(s)})),K(()=>{if(b){var o;if(v)o=ae(s,o,a.checked);else{var p=s.find(h=>h.checked);o=p==null?void 0:p.__value}l(o)}})}function ee(e,t,a=t){W(e,"change",()=>{var r=e.checked;a(r)}),t()==null&&a(!1),j(()=>{var r=t();e.checked=!!r})}function ae(e,t,a){for(var r=new Set,l=0;l<e.length;l+=1)e[l].checked&&r.add(e[l].__value);return a||r.delete(t),Array.from(r)}function le(e){var t=e.type;return t==="number"||t==="range"}function se(e){return e===""?null:+e}var be=te(`<div class="max-w-2xl mx-auto p-6 w-full"><h1 class="text-3xl font-bold mb-6">Create a new model</h1> <form class="flex flex-col gap-4"><div class="form-control"><label for="model-name" class="label font-medium mb-1">Model Name</label> <input id="model-name" required type="text" class="input input-bordered w-full" placeholder="Enter model name"></div> <div class="form-control"><label for="model-description" class="label font-medium mb-1">Model Description</label> <input id="model-description" required type="text" class="input input-bordered w-full" placeholder="Enter model description"></div> <div class="form-control"><label for="model-url" class="label font-medium mb-1">Model URL</label> <input id="model-url" required type="text" class="input input-bordered w-full" placeholder="Enter model URL"></div> <div class="form-control"><label class="label font-medium mb-1">Task</label> <div class="flex gap-4"><label class="label cursor-pointer"><input type="radio" name="task" class="radio radio-primary" disabled> <span class="ml-2">Classification</span></label> <label class="label cursor-pointer"><input type="radio" name="task" class="radio radio-primary" disabled> <span class="ml-2">Detection</span></label> <label class="label cursor-pointer"><input type="radio" name="task" class="radio radio-primary"> <span class="ml-2">Segmentation</span></label></div></div> <div class="form-control"><label class="preprocessing font-medium mb-1">Preprocessing options</label> <div class="flex flex-col gap-4"><label class="preprocessing cursor-pointer"><input type="checkbox" name="preprocessing" class="checkbox checkbox-primary"> <span class="ml-2">S2RGB</span> <p class="text-sm text-gray-600 ml-8">Converts Sentinel-2 bands 4,3,2 to RGB by scaling values between
            0-3000 to 0-255</p></label></div></div> <div class="form-control"><label class="postprocessing font-medium mb-1">Postprocessing options</label> <div class="flex flex-col gap-4"><label class="postprocessing cursor-pointer"><input type="checkbox" name="postprocessing" class="checkbox checkbox-primary"> <span class="ml-2">Sigmoid</span> <p class="text-sm text-gray-600 ml-8">Applies sigmoid function to model output and thresholds at 0.5 to
            create binary mask</p></label></div></div> <p>When you perform inference, the backend will perform a POST request to the
      model URL with the image as a multipart/form-data request, using the name
      "image" for the form data field. You can use the preprocessing and
      postprocessing options to preprocess and postprocess the image before and
      after inference (limited to simple, common operations).</p> <button class="btn btn-primary mt-4 w-full md:w-auto md:self-end" type="submit">Create Model</button></form></div>`);function Se(e,t){ce(t,!0);const a=[];let r=B(""),l=B(""),v=B(""),s=B("segmentation"),b=X({S2RGB:!1}),f=X({Sigmoid:!1});const o=async i=>{if(i.preventDefault(),m(r)!==""&&m(l)!=="")try{const O=await ve.create(m(r),m(l),m(v),m(s),Object.entries(b).filter(([k,P])=>P).map(([k])=>k),Object.entries(f).filter(([k,P])=>P).map(([k])=>k));fe(`/models/${O.id}`)}catch(O){alert(O)}};var p=be(),h=d(n(p),2),G=n(h),N=d(n(G),2);u(N),c(G);var q=d(G,2),V=d(n(q),2);u(V),c(q);var C=d(q,2),Y=d(n(C),2);u(Y),c(C);var M=d(C,2),Z=d(n(M),2),D=n(Z),x=n(D);u(x),x.value=(x.__value="classification")==null?"":"classification",g(2),c(D);var E=d(D,2),y=n(E);u(y),y.value=(y.__value="detection")==null?"":"detection",g(2),c(E);var $=d(E,2),S=n($);u(S),S.value=(S.__value="segmentation")==null?"":"segmentation",g(2),c($),c(Z),c(M);var L=d(M,2),z=d(n(L),2),F=n(z),w=n(F);u(w),w.value=(w.__value="S2RGB")==null?"":"S2RGB",g(4),c(F),c(z),c(L);var H=d(L,2),I=d(n(H),2),J=n(I),R=n(J);u(R),R.value=(R.__value="Sigmoid")==null?"":"Sigmoid",g(4),c(J),c(I),c(H),g(4),c(h),c(p),me("submit",h,o),A(N,()=>m(r),i=>_(r,i)),A(V,()=>m(l),i=>_(l,i)),A(Y,()=>m(v),i=>_(v,i)),U(a,[],x,()=>m(s),i=>_(s,i)),U(a,[],y,()=>m(s),i=>_(s,i)),U(a,[],S,()=>m(s),i=>_(s,i)),ee(w,()=>b.S2RGB,i=>b.S2RGB=i),ee(R,()=>f.Sigmoid,i=>f.Sigmoid=i),oe(e,p),de()}export{Se as component};
