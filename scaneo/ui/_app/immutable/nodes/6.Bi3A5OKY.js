import{a as p,t as m,c as q}from"../chunks/disclose-version.hHXjza9X.js";import{p as z,u as B,t as l,a as F,f as G,b as C,e as H,c as s,r,s as n,g as J}from"../chunks/runtime.B40kIuYm.js";import{s as c}from"../chunks/render.CM3wPBfR.js";import{i as k}from"../chunks/if.BU02RLSO.js";import{s as K}from"../chunks/attributes.faLUl4vZ.js";import{d as L,e as M}from"../chunks/events.DTvxUH_b.js";import{s as Q,a as R,p as S}from"../chunks/stores.Bp1jUs6P.js";import{c as t}from"../chunks/campaigns.svelte.D1s0rgbZ.js";import{o as T}from"../chunks/index-client.JNdFE_pc.js";const U=(w,v)=>{t.cancel(),C(v,!1)};var V=m('<div class="flex flex-row justify-between alert"><p>Campaign exported successfully !</p></div>'),W=m('<div class="flex flex-col gap-2"><div class="flex items-center justify-between"><span class="text-sm"> </span> <button type="button" class="btn btn-sm btn-error">Cancel</button></div> <progress class="w-full progress progress-primary" max="100"></progress></div>'),X=m('<button class="btn btn-outline" type="submit">Export campaign</button>'),Z=m('<div class="w-full max-w-2xl p-6 mx-auto"><form class="flex flex-col gap-4"><p> </p> <p> </p> <p> </p> <!></form></div>');function lt(w,v){z(v,!0);const j=Q(),$=()=>R(S,"$page",j);let f=H(!1);B(()=>{t.retrieveOne($().url.searchParams.get("id"))});const D=a=>{a.preventDefault();try{C(f,!0),t.export($().url.searchParams.get("id"))}catch(e){alert(e.message)}};T(()=>{t.reset()});var u=Z(),g=s(u),d=s(g),N=s(d);r(d);var _=n(d,2),P=s(_);r(_);var x=n(_,2),A=s(x);r(x);var E=n(x,2);k(E,()=>t.completed,a=>{var e=V();p(a,e)},a=>{var e=q(),i=G(e);k(i,()=>t.exporting,b=>{var o=W(),y=s(o),h=s(y),I=s(h);r(h);var O=n(h,2);O.__click=[U,f],r(y);var Y=n(y,2);l(()=>K(Y,isNaN(t.progress)?0:t.progress*100)),r(o),l(()=>c(I,t.message)),p(b,o)},b=>{var o=X();l(()=>o.disabled=J(f)),p(b,o)},!0),p(a,e)}),r(g),r(u),l(()=>{var a,e,i;c(N,`Your annotations will be exported at: ${((a=t.current)==null?void 0:a.path)??""}`),c(P,`Images: ${((e=t.current)==null?void 0:e.image_count)??""}`),c(A,`Annotations: ${((i=t.current)==null?void 0:i.annotation_count)??""}`)}),M("submit",g,D),p(w,u),F()}L(["click"]);export{lt as component};
