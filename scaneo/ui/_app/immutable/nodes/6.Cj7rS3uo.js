import{a as l,t as c,c as q}from"../chunks/disclose-version.DymP2m3X.js";import{p as U,u as V,t as g,a as W,f as O,s as i,g as n,b as P,e as A,c as o,n as S,r as s,d as X}from"../chunks/runtime.cJOh_ioU.js";import{s as $}from"../chunks/render.Gnl0czpM.js";import{i as b}from"../chunks/if.Bhj5v8Zz.js";import{r as j,a as Z}from"../chunks/attributes.CayNqfGD.js";import{d as ee,e as te}from"../chunks/events.BOQTMbzA.js";import{b as ae,a as Y}from"../chunks/input.CvnAJZ7U.js";import{s as re,a as oe,p as se}from"../chunks/stores.BRHuMDzc.js";import{c as a}from"../chunks/campaigns.svelte.B65SHqyX.js";import{o as pe}from"../chunks/index-client.BS7WnwP4.js";const le=()=>{a.cancel()};var ne=c("<p> </p>"),ie=c('<input type="text" class="input input-bordered w-full mt-2" placeholder="Enter export path" required>'),ce=c('<p>This is an EOTDL dataset. Choose one export option:</p> <div class="form-control"><label class="cursor-pointer gap-2 flex flex-row items-center"><input type="radio" name="export-type" class="radio radio-xs"> <span class="label-text">Export to EOTDL</span></label></div> <div class="form-control"><label class="cursor-pointer gap-2 flex flex-row items-center"><input type="radio" name="export-type" class="radio radio-xs"> <span class="label-text">Export to local folder</span></label> <!></div>',1),ve=c("<p>Something went wrong :(</p>"),de=c('<div class="flex flex-row justify-between alert"><p>Campaign exported successfully !</p></div>'),ue=c('<div class="flex flex-col gap-2"><div class="flex items-center justify-between"><span class="text-sm"> </span> <button type="button" class="btn btn-sm btn-error">Cancel</button></div> <progress class="w-full progress progress-primary" max="100"></progress></div>'),me=c('<button class="btn btn-outline" type="submit">Export campaign</button>'),fe=c('<div class="w-full max-w-2xl p-6 mx-auto"><form class="flex flex-col gap-4"><!> <p> </p> <p> </p> <!></form></div>');function Ce(z,B){U(B,!0);const F=re(),I=()=>oe(se,"$page",F),L=[];let G=X(()=>a.exporting),v=A("eotdl"),h=A("");V(()=>{a.retrieveOne(I().url.searchParams.get("id"))});const H=t=>{if(!(n(v)==="folder"&&!n(h))){t.preventDefault();try{a.export(I().url.searchParams.get("id"),n(v),n(h))}catch(e){alert(e.message)}}};pe(()=>{a.reset()});var E=fe(),D=o(E),N=o(D);b(N,()=>{var t;return(t=a.current)==null?void 0:t.path},t=>{var e=ne(),f=o(e);s(e),g(()=>{var r;return $(f,`Your annotations will be exported at: ${((r=a.current)==null?void 0:r.path)??""}`)}),l(t,e)},t=>{var e=q(),f=O(e);b(f,()=>{var r;return(r=a.current)==null?void 0:r.eotdlDatasetId},r=>{var p=ce(),d=i(O(p),2),u=o(d),m=o(u);j(m),m.value=(m.__value="eotdl")==null?"":"eotdl",S(2),s(u),s(d);var y=i(d,2),_=o(y),w=o(_);j(w),w.value=(w.__value="folder")==null?"":"folder",S(2),s(_);var Q=i(_,2);b(Q,()=>n(v)==="folder",x=>{var k=ie();j(k),ae(k,()=>n(h),R=>P(h,R)),l(x,k)}),s(y),Y(L,[],m,()=>n(v),x=>P(v,x)),Y(L,[],w,()=>n(v),x=>P(v,x)),l(r,p)},r=>{var p=ve();l(r,p)},!0),l(t,e)});var C=i(N,2),J=o(C);s(C);var T=i(C,2),K=o(T);s(T);var M=i(T,2);b(M,()=>a.completed,t=>{var e=de();l(t,e)},t=>{var e=q(),f=O(e);b(f,()=>a.exporting,r=>{var p=ue(),d=o(p),u=o(d),m=o(u);s(u);var y=i(u,2);y.__click=[le],s(d);var _=i(d,2);g(()=>Z(_,isNaN(a.progress)?0:a.progress*100)),s(p),g(()=>$(m,a.message)),l(r,p)},r=>{var p=me();g(()=>p.disabled=n(G)),l(r,p)},!0),l(t,e)}),s(D),s(E),g(()=>{var t,e;$(J,`Images: ${((t=a.current)==null?void 0:t.image_count)??""}`),$(K,`Annotations: ${((e=a.current)==null?void 0:e.annotation_count)??""}`)}),te("submit",D,H),l(z,E),W()}ee(["click"]);export{Ce as component};
