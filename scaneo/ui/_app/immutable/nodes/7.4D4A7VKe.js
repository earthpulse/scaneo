const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["../assets/leaflet.GL2v8lVq.css","../assets/leaflet.jCI8mrZJ.css"])))=>i.map(i=>d[i]);
import{a as C,n as T,t as z,c as _t}from"../chunks/disclose-version.B2KZf9IU.js";import{b as g,g as e,a6 as Qt,t as B,c as h,s as x,r as m,e as A,p as Z,u as G,a as j,f as Q,d as jt,aE as Xt,aF as Yt}from"../chunks/runtime.Cc8uOHDr.js";import{i as k}from"../chunks/if.Oi7VUvDo.js";import{p as I}from"../chunks/proxy.BspkkFag.js";import{s as At,a as kt,p as Vt}from"../chunks/stores.D5K8lnIz.js";import{d as pt,e as Ct}from"../chunks/events.Cg6ZOttp.js";import{a as lt,s as $}from"../chunks/class.CXklx8Hp.js";import{s as S}from"../chunks/render.CsxgilDe.js";import{s as y,r as vt,a as Dt}from"../chunks/attributes.CbHwAdOI.js";import{p as _}from"../chunks/props.u9eC-9cV.js";import{_ as ft}from"../chunks/preload-helper.C1FmrZbK.js";import{b as X,f as rt}from"../chunks/fetcher.BRwa_rnV.js";import{l as F,L as $t}from"../chunks/Labels.B5roCQMr.js";import{o as wt}from"../chunks/index-client.DCxZtkjM.js";import{m as mt}from"../chunks/models.svelte.CPkJoM-F.js";import{e as ht,i as bt}from"../chunks/each.ChQ01HWP.js";import{b as te,D as ee}from"../chunks/DeleteOutline.CuLZNuAR.js";import{R as ae,F as re}from"../chunks/RobotOutline.gKK6J9-q.js";import{E as oe}from"../chunks/ExportBtn.DvT4pWh5.js";import{s as ne}from"../chunks/snippet.e-uar50c.js";import{i as Gt}from"../chunks/lifecycle.DQcbkX6v.js";import{b as ie,a as le}from"../chunks/input._XCgZazi.js";import{c as Bt}from"../chunks/campaigns.svelte.B4IofCcX.js";function se(r){var t=Qt(0);return function(){return arguments.length===1?(g(t,e(t)+1),arguments[0]):(e(t),r())}}var ce=T("<desc> </desc>"),de=T("<title> </title>"),ve=T('<svg><!><!><path d="M12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5M12,2A7,7 0 0,1 19,9C19,14.25 12,22 12,22C12,22 5,14.25 5,9A7,7 0 0,1 12,2M12,4A5,5 0 0,0 7,9C7,10 7,12 12,18.71C17,12 17,10 17,9A5,5 0 0,0 12,4Z"></path></svg>');function ue(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=ve(),p=h(o);k(p,s,H=>{var b=ce(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=de(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var fe=T("<desc> </desc>"),ge=T("<title> </title>"),_e=T('<svg><!><!><path d="M12,11.5A2.5,2.5 0 0,1 9.5,9A2.5,2.5 0 0,1 12,6.5A2.5,2.5 0 0,1 14.5,9A2.5,2.5 0 0,1 12,11.5M12,2A7,7 0 0,0 5,9C5,14.25 12,22 12,22C12,22 19,14.25 19,9A7,7 0 0,0 12,2Z"></path></svg>');function me(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=_e(),p=h(o);k(p,s,H=>{var b=fe(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=ge(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var he=T("<desc> </desc>"),be=T("<title> </title>"),pe=T('<svg><!><!><path d="M5,3C3.89,3 3,3.89 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V12H19V19H5V5H12V3H5M17.78,4C17.61,4 17.43,4.07 17.3,4.2L16.08,5.41L18.58,7.91L19.8,6.7C20.06,6.44 20.06,6 19.8,5.75L18.25,4.2C18.12,4.07 17.95,4 17.78,4M15.37,6.12L8,13.5V16H10.5L17.87,8.62L15.37,6.12Z"></path></svg>');function we(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=pe(),p=h(o);k(p,s,H=>{var b=he(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=be(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var ye=T("<desc> </desc>"),Le=T("<title> </title>"),xe=T('<svg><!><!><path d="M2,2V8H4.28L5.57,16H4V22H10V20.06L15,20.05V22H21V16H19.17L20,9H22V3H16V6.53L14.8,8H9.59L8,5.82V2M4,4H6V6H4M18,5H20V7H18M6.31,8H7.11L9,10.59V14H15V10.91L16.57,9H18L17.16,16H15V18.06H10V16H7.6M11,10H13V12H11M6,18H8V20H6M17,18H19V20H17"></path></svg>');function Ee(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=xe(),p=h(o);k(p,s,H=>{var b=ye(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=Le(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}function Ie(){let r=A(null);return{get map(){return e(r)},set map(t){g(r,I(t))}}}const P=Ie(),Ce=async r=>{const t=`${X.api_url}/annotations/${r}`;return rt(t)};async function De(r,t){const a=`${X.api_url}/annotations/classification`;return rt(a,"POST",{label:r,imageId:t})}async function He(r,t,a){const n=`${X.api_url}/annotations/detection`;return rt(n,"POST",{bb:r,label:t,imageId:a})}async function Be(r,t,a){const n=`${X.api_url}/annotations/segmentation`;return rt(n,"POST",{layer_data:r,label:t,imageId:a})}async function Ae(r,t,a){const n=`${X.api_url}/annotations/points`;return rt(n,"POST",{points:r,label:t,imageId:a})}const ke=async r=>{const t=`${X.api_url}/annotations/${r}`;return rt(t,"DELETE")};async function Ve(r,t){const a=`${X.api_url}/annotations/detection/${r}`;return rt(a,"PUT",{bb:t})}async function Se(r,t){const a=`${X.api_url}/annotations/points/${r}`;return rt(a,"PUT",{points:t})}function Me(){let r=A(I([])),t=A(!0),a=A(null),n=A(null);return{get data(){return e(r)},get loading(){return e(t)},get error(){return e(a)},get current(){return e(n)},set current(i){g(n,I(i))},retrieve:async i=>{g(t,!0);const{data:l,error:u}=await Ce(i);return u&&g(a,I(u.message)),g(r,I(l)),g(t,!1),l},createClassification:async(i,l)=>{const{data:u,error:d}=await De(i,l);if(d)throw new Error(d.message);e(r).find(f=>f.id===u.id)?g(r,I(e(r).map(f=>f.id===u.id?u:f))):g(r,I([u,...e(r)]))},createDetection:async(i,l,u)=>{const{data:d,error:f}=await He(i,l,u);if(f)throw new Error(f.message);return g(r,I([d,...e(r)])),d},updateDetection:async(i,l)=>{const{data:u,error:d}=await Ve(i,l);if(d)throw new Error(d.message);g(r,I(e(r).map(f=>f.id===i?{...f,bb:l}:f)))},createSegmentation:async(i,l,u)=>{const{data:d,error:f}=await Be(i,l,u);if(f)throw new Error(f.message);return g(r,I([d,...e(r)])),d},createPoints:async(i,l,u)=>{const{data:d,error:f}=await Ae(i,l,u);if(f)throw new Error(f.message);return g(r,I([d,...e(r)])),d},updatePoints:async(i,l)=>{const{data:u,error:d}=await Se(i,l);if(d)throw new Error(d.message);g(r,I(e(r).map(f=>f.id===i?{...f,points:l}:f)))},delete:async i=>{const{error:l}=await ke(i);if(l)throw new Error(l.message);g(r,I(e(r).filter(u=>u.id!==i)))},reset:()=>{g(r,I([])),g(t,!0),g(a,null),g(n,null)},append:i=>{g(r,I([...i,...e(r)]))}}}const O=Me(),ze=async r=>{const t=`${X.api_url}/images/${r}`;return rt(t)};function Pe(){let r=A(I([])),t=A(!0),a=A(null),n=A(null);return{get data(){return e(r)},get loading(){return e(t)},get error(){return e(a)},get current(){return e(n)},set current(i){g(n,I(i))},retrieve:async i=>{g(t,!0);const{data:l,error:u}=await ze(i);u&&g(a,I(u.message)),g(r,I(l)),g(t,!1)},zoom:(i,l)=>{const u=L.latLng(i[1],i[0]),d=L.latLng(i[3],i[2]),f=L.latLngBounds(u,d);l.fitBounds(f)},reset:()=>{g(r,I([])),g(t,!0),g(a,null),g(n,null)}}}const V=Pe();function Te(){let r=A(null),t=A(null),a,n,i;const l=async s=>{const{layer:c}=s,o=c.getBounds(),p=await O.createDetection([[o._southWest.lat,o._northEast.lng],[o._northEast.lat,o._southWest.lng]],F.current,V.current.id);c.options.color=F.data.filter(w=>p.value==w.name)[0].color,c.annotationId=p.id,e(r).addLayer(c)},u=s=>{s.layers.eachLayer(c=>{const o=c.getBounds();O.updateDetection(c.annotationId,[[o._southWest.lat,o._northEast.lng],[o._northEast.lat,o._southWest.lng]])})},d=s=>{s.layers.eachLayer(c=>{O.delete(c.annotationId)})},f=s=>{e(r)?e(r).clearLayers():g(r,I(new L.FeatureGroup)),s.addLayer(e(r))};return{initItems:f,initControls:s=>{e(r)||f(s),a&&s.off(L.Draw.Event.CREATED,a),n&&s.off(L.Draw.Event.EDITED,n),i&&s.off(L.Draw.Event.DELETED,i),e(t)&&s.removeControl(e(t)),g(t,I(new L.Control.Draw({position:"topright",edit:{featureGroup:e(r)},draw:{polyline:!1,circlemarker:!1,circle:!1,marker:!1,rectangle:{repeatMode:!0,showArea:!1,showLength:!0,shapeOptions:{weight:1}},polygon:!1}}))),s.addControl(e(t)),a=async c=>await l(c),n=u,i=d,s.on(L.Draw.Event.CREATED,a),s.on(L.Draw.Event.EDITED,n),s.on(L.Draw.Event.DELETED,i)},remove:s=>{e(r)&&(s==null||s.removeLayer(e(r))),e(t)&&(s==null||s.removeControl(e(t))),a&&s.off(L.Draw.Event.CREATED,a),n&&s.off(L.Draw.Event.EDITED,n),i&&s.off(L.Draw.Event.DELETED,i),g(r,null),g(t,null)},addLayer:s=>{const c=s.bb,o=L.rectangle([[c[0][0],c[0][1]],[c[1][0],c[1][1]]],{editing:!0});o.options.color=F.data.filter(p=>s.value==p.name)[0].color,o.annotationId=s.id,e(r).addLayer(o)},removeLayer:s=>{var c;(c=e(r))==null||c.eachLayer(o=>{o.annotationId===s&&e(r).removeLayer(o)})}}}const W=Te();function Oe(){let r=A(null),t=A(null);const a=()=>O.data.find(v=>v.value==F.current&&v.type=="segmentation"),n=()=>{if(a()){const v=a();e(t).setData(v.layer_data),e(t).options.layerOptions.color=F.data.filter(s=>v.value==s.name)[0].color,e(r).eachLayer(s=>{s.annotationId===v.id&&e(r).removeLayer(s)})}},i=async()=>{var s;const v=(s=e(t))==null?void 0:s.getData();if(v)try{if(a()){const p=a();l(p.id)}const c=await O.createSegmentation(v,F.current,V.current.id),o=L.geoJSON(v,{style:{color:F.data.filter(p=>c.value==p.name)[0].color}});o.annotationId=c.id,e(r).addLayer(o),e(t).eraseAll()}catch(c){console.error("Error saving annotation:",c)}},l=v=>{e(r).eachLayer(s=>{s.annotationId===v&&(e(r).removeLayer(s),O.delete(v))}),O.delete(v)};return{initItems:v=>{e(r)?e(r).clearLayers():g(r,I(new L.FeatureGroup)),v.addLayer(e(r))},initControls:v=>{e(t)&&(e(t).stop(),v.removeControl(e(t))),g(t,I(L.control.paintPolygon({layerOptions:{color:F.data.filter(s=>F.current==s.name)[0].color}}))),v.addControl(e(t)),v.on("mousedown",n),v.on("mouseup",i)},addLayer:v=>{const s=L.geoJSON(v.layer_data,{style:{color:F.data.filter(c=>v.value==c.name)[0].color}});s.annotationId=v.id,e(r).addLayer(s)},remove:v=>{e(t)&&(e(t).stop(),e(t).eraseAll(),v.removeControl(e(t)),v.off("mousedown",n),v.off("mouseup",i)),e(r)&&(v==null||v.removeLayer(e(r))),g(r,null),g(t,null)},removeLayer:l}}const U=Oe();function Re(){let r=A(null),t=A(null),a=A(I([])),n,i;const l=()=>O.data.find(c=>c.value==F.current&&c.type=="points"),u=async c=>{let o={};c.layers.eachLayer(p=>{const w=[p.getLatLng().lat,p.getLatLng().lng],D=e(a).findIndex(H=>H[0]===w[0]&&H[1]===w[1]);D>-1&&(e(a).splice(D,1),p.annotationId&&(o[p.annotationId]=!0))}),Object.keys(o).forEach(p=>{O.updatePoints(p,e(a))})},d=()=>{e(r).eachLayer(c=>{e(r).removeLayer(c)}),g(a,I([]))},f=async c=>{const{layer:o}=c;e(r).addLayer(o),l()?(e(a).push([o.getLatLng().lat,o.getLatLng().lng]),o.annotationId=O.data.find(p=>p.value==F.current&&p.type=="points").id,O.updatePoints(o.annotationId,e(a))):(e(a).push([o.getLatLng().lat,o.getLatLng().lng]),await O.createPoints(e(a),F.current,V.current.id))},v=c=>{e(r)?e(r).clearLayers():g(r,I(new L.FeatureGroup)),c.addLayer(e(r))};return{initItems:v,initControls:c=>{e(r)||v(c),n&&c.off(L.Draw.Event.CREATED,n),i&&c.off(L.Draw.Event.DELETED,i),e(t)&&c.removeControl(e(t)),g(t,I(new L.Control.Draw({position:"topright",edit:{featureGroup:e(r)},draw:{polyline:!1,circlemarker:!1,circle:!1,marker:{repeatMode:!0},rectangle:!1,polygon:!1}}))),c.addControl(e(t)),n=async o=>await f(o),i=async o=>await u(o),c.on(L.Draw.Event.CREATED,n),c.on(L.Draw.Event.DELETED,i)},deletePointsAnnotation:d,remove:c=>{e(r)&&(c==null||c.removeLayer(e(r))),e(t)&&(c==null||c.removeControl(e(t))),i&&c.off(L.Draw.Event.DELETED,i),n&&c.off(L.Draw.Event.CREATED,n),g(r,null),g(t,null),g(a,I([]))},addLayer:c=>{c.points.forEach(p=>{const w=L.marker(p);w.annotationId=c.id,e(r).addLayer(w)})}}}const q=Re();function Ne(r,t){Z(t,!0),G(async()=>{await ft(()=>import("../chunks/leaflet.draw.cJkf-kdY.js"),[],import.meta.url),await ft(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const a=await O.retrieve(V.current.id),n=P.map;U.remove(n),q.remove(n),W.initControls(n),W.initItems(P.map),a==null||a.forEach(i=>{i.type==="detection"&&W.addLayer(i)})}),wt(()=>{W.remove(P.map)}),j()}function Fe(r,t){Z(t,!0),G(async()=>{await ft(()=>import("../chunks/Leaflet.PaintPolygon.BL41ABOh.js"),[],import.meta.url);const a=P.map;W.remove(a),q.remove(a),U.initControls(a),U.initItems(a);const n=await O.retrieve(V.current.id);n==null||n.forEach(i=>{i.type==="segmentation"&&U.addLayer(i)})}),wt(()=>{U.remove(P.map)}),j()}var Ze=T("<desc> </desc>"),je=T("<title> </title>"),Ge=T('<svg><!><!><path d="M12,9A3,3 0 0,1 15,12A3,3 0 0,1 12,15A3,3 0 0,1 9,12A3,3 0 0,1 12,9M12,4.5C17,4.5 21.27,7.61 23,12C21.27,16.39 17,19.5 12,19.5C7,19.5 2.73,16.39 1,12C2.73,7.61 7,4.5 12,4.5M3.18,12C4.83,15.36 8.24,17.5 12,17.5C15.76,17.5 19.17,15.36 20.82,12C19.17,8.64 15.76,6.5 12,6.5C8.24,6.5 4.83,8.64 3.18,12Z"></path></svg>');function We(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=Ge(),p=h(o);k(p,s,H=>{var b=Ze(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=je(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}function Ue(r,t){Z(t,!0),G(async()=>{await ft(()=>import("../chunks/leaflet.draw.cJkf-kdY.js"),[],import.meta.url),await ft(()=>Promise.resolve({}),__vite__mapDeps([0]),import.meta.url);const a=await O.retrieve(V.current.id),n=P.map;U.remove(n),W.remove(n),q.initControls(n),q.initItems(P.map),a==null||a.forEach(i=>{console.log(i),i.type==="points"&&q.addLayer(i)})}),wt(()=>{q.remove(P.map)}),j()}var Je=z('<div class="w-[2px] h-[30px] bg-slate-500 self-center rounded-full"></div>');function Wt(r){var t=Je();C(r,t)}const qe=async(r,t,a)=>{if(t()){g(a,"classification");try{await O.createClassification(F.current,V.current.id)}catch(n){console.error(n)}}},Ke=async(r,t,a)=>{t()&&g(a,"points")},Qe=(r,t,a)=>{t()&&g(a,"detection")},Xe=(r,t,a)=>{t()&&g(a,"segmentation")},Ye=async(r,t)=>{g(t,null);const a=await O.retrieve(V.current.id);W.initItems(P.map),U.initItems(P.map),q.initItems(P.map),a==null||a.forEach(n=>{n.type==="detection"&&W.addLayer(n),n.type==="segmentation"&&U.addLayer(n),n.type==="points"&&q.addLayer(n)})};var $e=z('<button data-tip="Points"><!></button>'),ta=z('<button data-tip="Classification"><!></button> <button data-tip="Detection"><!></button> <button data-tip="Segmentation"><!></button> <button data-tip="See all annotations"><!></button> <!> <!> <!> <!> <!>',1);function ea(r,t){Z(t,!0);let a=A(null);const n=()=>V.current?F.current?!0:alert("Select label"):alert("Select image");var i=ta(),l=Q(i);l.__click=[qe,n,a];var u=h(l);ue(u,{size:"15"}),m(l);var d=x(l,2);d.__click=[Qe,n,a];var f=h(d);we(f,{size:"15"}),m(d);var v=x(d,2);v.__click=[Xe,n,a];var s=h(v);Ee(s,{size:"15"}),m(v);var c=x(v,2);c.__click=[Ye,a];var o=h(c);We(o,{size:"15"}),m(c);var p=x(c,2);Wt(p);var w=x(p,2);k(w,()=>{var E;return((E=mt.current)==null?void 0:E.task)=="SAM"},E=>{var N=$e();N.__click=[Ke,n,a];var M=h(N);me(M,{size:"15"}),m(N),B(()=>$(N,`btn ${(e(a)==="points"?"btn-primary":"btn-outline")??""} btn-sm tooltip tooltip-right flex items-center p-2`)),C(E,N)});var D=x(w,2);k(D,()=>e(a)==="detection",E=>{Ne(E,{})});var H=x(D,2);k(H,()=>e(a)==="segmentation",E=>{Fe(E,{})});var b=x(H,2);k(b,()=>e(a)==="points",E=>{Ue(E,{})}),B(()=>{$(l,`btn ${(e(a)==="classification"?"btn-primary":"btn-outline")??""} btn-sm tooltip tooltip-right flex items-center p-2`),$(d,`btn ${(e(a)==="detection"?"btn-primary":"btn-outline")??""} btn-sm tooltip flex items-center p-2`),$(v,`btn ${(e(a)==="segmentation"?"btn-primary":"btn-outline")??""} btn-sm tooltip flex items-center p-2`),$(c,`btn ${(e(a)===null?"btn-primary":"btn-outline")??""} btn-sm tooltip flex items-center p-2`)}),C(r,i),j()}pt(["click"]);const aa=async(r,t,a)=>{if(!V.current)return alert("Select image");if(!e(t))return alert("Select model");g(a,!0);try{const n=await mt.inference(e(t),V.current.id);n==null||n.forEach(i=>{i.type==="detection"&&W.addLayer(i),i.type==="segmentation"&&U.addLayer(i)}),O.append(n),P.map.addLayer(L.geoJSON(n))}catch(n){console.error(n),alert(n)}finally{g(a,!1)}};var ra=(r,t)=>mt.retrieveOne(e(t)),oa=z("<option> </option>"),na=z('<select class="select select-sm"><option disabled>Select a model</option><!></select> <button class="flex items-center p-2 btn btn-sm tooltip btn-outline" data-tip="Run model inference"><!></button> <!>',1);function ia(r,t){Z(t,!0);const a=At(),n=()=>kt(Vt,"$page",a);let i=A(null),l=A(!1);G(()=>{mt.retrieve(n().params.campaign)});var u=_t(),d=Q(u);k(d,()=>{var f;return((f=mt.data)==null?void 0:f.length)>0},f=>{var v=na(),s=Q(v);s.__change=[ra,i];var c=h(s);c.value=(c.__value=null)==null?"":null;var o=x(c);ht(o,17,()=>mt.data,bt,(H,b)=>{var E=oa(),N={},M=h(E);m(E),B(()=>{N!==(N=e(b).id)&&(E.value=(E.__value=e(b).id)==null?"":e(b).id),S(M,e(b).name)}),C(H,E)}),m(s);var p=x(s,2);p.__click=[aa,i,l];var w=h(p);ae(w,{size:"15"}),m(p);var D=x(p,2);Wt(D),B(()=>p.disabled=e(l)),te(s,()=>e(i),H=>g(i,H)),C(f,v)}),C(r,u),j()}pt(["change","click"]);function la(){let r=A(null),t=A(I([4,3,2])),a=A(I([0,4e3]));return{set showImageBBs(n){g(r,I(n)),localStorage.setItem("showImageBBs",n)},get showImageBBs(){return e(r)},set rgb(n){g(t,I(n)),localStorage.setItem("rgb",n)},get rgb(){return e(t)},set stretch(n){g(a,I(n)),localStorage.setItem("stretch",n)},get stretch(){return e(a)},init:()=>{g(r,localStorage.getItem("showImageBBs")==="true"),g(t,I(localStorage.getItem("rgb")?localStorage.getItem("rgb").split(",").map(Number):[4,3,2])),g(a,I(localStorage.getItem("stretch")?localStorage.getItem("stretch").split(",").map(Number):[0,4e3]))}}}const tt=la();function sa(){let r=A(null);return{initItems:t=>{e(r)?e(r).clearLayers():g(r,I(new L.FeatureGroup)),t.addLayer(e(r))},addBbox:(t,a)=>{let n=t.bbox;n=L.rectangle([[n[1],n[0]],[n[3],n[2]]],{interactive:!0,weight:10}),n.annotationId=t.path,n.on("click",()=>{a.fitBounds(n.getBounds()),V.current=t}),e(r).addLayer(n)},zoom:t=>{const a=e(r).getBounds();a.isValid()&&t.fitBounds(a)},toggle:t=>{tt.showImageBBs?(t.removeLayer(e(r)),tt.showImageBBs=!1):(t.addLayer(e(r)),tt.showImageBBs=!0)},hide:t=>{t==null||t.removeLayer(e(r))},remove:t=>{t==null||t.removeLayer(e(r))}}}const ut=sa();var ca=T("<desc> </desc>"),da=T("<title> </title>"),va=T('<svg><!><!><path d="M20,16V10H22V16A2,2 0 0,1 20,18H8C6.89,18 6,17.1 6,16V4C6,2.89 6.89,2 8,2H16V4H8V16H20M10.91,7.08L14,10.17L20.59,3.58L22,5L14,13L9.5,8.5L10.91,7.08M16,20V22H4A2,2 0 0,1 2,20V7H4V20H16Z"></path></svg>');function ua(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=va(),p=h(o);k(p,s,H=>{var b=ca(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=da(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var fa=T("<desc> </desc>"),ga=T("<title> </title>"),_a=T('<svg><!><!><path d="M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22H20A2,2 0 0,0 22,20V12A10,10 0 0,0 12,2M13,7H11V11H7V13H11V17H13V13H17V11H13V7Z"></path></svg>');function ma(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=_a(),p=h(o);k(p,s,H=>{var b=fa(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=ga(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var ha=()=>ut.toggle(P.map),ba=()=>ut.zoom(P.map),pa=z('<section class="flex flex-row gap-2"><span><button><!></button></span> <button class="btn btn-sm btn-outline tooltip tooltip-left flex items-center p-2" data-tip="Reset map"><!></button></section>');function wa(r,t){Z(t,!0),G(()=>{tt.init()});var a=pa(),n=h(a),i=h(n);i.__click=[ha];var l=h(i);ua(l,{size:"15"}),m(i),m(n);var u=x(n,2);u.__click=[ba];var d=h(u);ma(d,{size:"15"}),m(u),m(a),B(()=>{$(i,`btn btn-sm tooltip flex items-center p-2 ${(tt.showImageBBs?"btn-primary":"btn-outline")??""}`),y(i,"data-tip",`${(tt.showImageBBs?"Hide":"Show")??""} bbs`)}),C(r,a),j()}pt(["click"]);var ya=z('<nav class="flex flex-row gap-2 bg-bg2 p-3 border-b border-t border-border justify-between"><span class="flex flex-row gap-2"><!> <!> <!></span> <span class="flex flex-row gap-2"><!></span></nav>');function La(r,t){Z(t,!0);const a=At(),n=()=>kt(Vt,"$page",a);let i=A("");G(()=>{g(i,I(n().url.searchParams.get("id")))});var l=ya(),u=h(l),d=h(u);ea(d,{});var f=x(d,2);ia(f,{});var v=x(f,2),s=jt(()=>`${X.url}/campaigns/export?id=${e(i)}`);oe(v,{get link(){return e(s)}}),m(u);var c=x(u,2),o=h(c);wa(o,{}),m(c),m(l),C(r,l),j()}var xa=z('<div id="map" class="svelte-g0bqmp"><!></div>');function Ea(r,t){Z(t,!0);let a=A(null),n={attributionControl:!1,max_zoom:20};G(async()=>{var d;const u=await ft(()=>import("../chunks/leaflet-src.DTmlu4rB.js").then(f=>f.l),[],import.meta.url);return await ft(()=>Promise.resolve({}),__vite__mapDeps([1]),import.meta.url),g(a,I(u.map("map",n).setView(t.position,t.zoom))),e(a).zoomControl.setPosition("bottomright"),(d=t.panes)==null||d.forEach(({name:f,zIndex:v})=>{e(a).createPane(f),e(a).getPane(f).style.zIndex=v,e(a).getPane(f).style.pointerEvents="none"}),P.map=e(a),()=>e(a).remove()}),Xt("map",{getMap:()=>e(a)});var i=xa(),l=h(i);ne(l,()=>t.children),m(i),C(r,i),j()}var Ia=z("<p>No annotations found</p>"),Ca=(r,t,a)=>t(e(a).id),Da=z('<tr class="h-8 hover:bg-slate-100"><td> </td><td> </td><td class="w-8"><button class="px-2 hover:text-red-600"><!></button></td></tr>'),Ha=z('<div class="flex-grow overflow-auto"><table class="table w-full"><thead><tr><th class="sticky top-0 text-left bg-bg2">Label</th><th class="sticky top-0 text-left bg-bg2">Type</th><th class="sticky top-0 bg-bg2"></th></tr></thead><tbody></tbody></table></div>'),Ba=z('<section class="flex flex-col flex-1 h-full overflow-hidden"><!></section>');function Aa(r,t){Z(t,!1);const a=l=>{confirm("Are you sure you want to delete this annotation? This action is irreversible.")&&(O.delete(l),q.deletePointsAnnotation(l),W.removeLayer(l),U.removeLayer(l))};Gt();var n=Ba(),i=h(n);k(i,()=>O.data.length==0,l=>{var u=Ia();C(l,u)},l=>{var u=Ha(),d=h(u),f=x(h(d));ht(f,5,()=>O.data,bt,(v,s)=>{var c=Da(),o=h(c),p=h(o);m(o);var w=x(o),D=h(w);m(w);var H=x(w),b=h(H);b.__click=[Ca,a,s];var E=h(b);ee(E,{size:"15"}),m(b),m(H),m(c),B(()=>{S(p,e(s).value),S(D,e(s).type)}),C(v,c)}),m(f),m(d),m(u),C(l,u)}),m(n),C(r,n),j()}pt(["click"]);var R=se(()=>tt),ka=z('<section class="flex flex-col flex-1 h-full overflow-hidden"><p> </p> <div class="flex flex-row gap-2"><input type="number"> <input type="number"> <input type="number"></div> <p> </p> <div class="flex flex-row gap-2"><input type="number"> <input type="number"></div></section>');function Va(r,t){Z(t,!1),Gt();var a=ka(),n=h(a),i=h(n);B(()=>S(i,`RGB bands: ${R().rgb.join(", ")??""}`)),m(n);var l=x(n,2),u=h(l);vt(u),y(u,"min",0),y(u,"max",10),y(u,"step",1);var d=x(u,2);vt(d),y(d,"min",0),y(d,"max",10),y(d,"step",1);var f=x(d,2);vt(f),y(f,"min",0),y(f,"max",10),y(f,"step",1),m(l);var v=x(l,2),s=h(v);B(()=>S(s,`Stretch: ${R().stretch.join(", ")??""}`)),m(v);var c=x(v,2),o=h(c);vt(o),y(o,"min",0),y(o,"max",2**16),y(o,"step",1);var p=x(o,2);vt(p),y(p,"min",0),y(p,"max",2**16),y(p,"step",1),m(c),m(a),B(()=>{Dt(u,R().rgb[0]),Dt(d,R().rgb[1]),Dt(f,R().rgb[2]),Dt(o,R().stretch[0]),Dt(p,R().stretch[1])}),Ct("input",u,w=>{const D=[...R().rgb];D[0]=parseInt(w.target.value),R(R().rgb=D)}),Ct("input",d,w=>{const D=[...R().rgb];D[1]=parseInt(w.target.value),R(R().rgb=D)}),Ct("input",f,w=>{const D=[...R().rgb];D[2]=parseInt(w.target.value),R(R().rgb=D)}),Ct("input",o,w=>{const D=[...R().stretch];D[0]=parseInt(w.target.value),R(R().stretch=D)}),Ct("input",p,w=>{const D=[...R().stretch];D[1]=parseInt(w.target.value),R(R().stretch=D)}),C(r,a),j()}var Sa=T("<desc> </desc>"),Ma=T("<title> </title>"),za=T('<svg><!><!><path d="M19,19H5V5H19M19,3H5A2,2 0 0,0 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M13.96,12.29L11.21,15.83L9.25,13.47L6.5,17H17.5L13.96,12.29Z"></path></svg>');function Pa(r,t){let a=_(t,"size",8,"1em"),n=_(t,"width",24,a),i=_(t,"height",24,a),l=_(t,"color",8,"currentColor"),u=_(t,"viewBox",8,"0 0 24 24"),d=_(t,"ariaLabel",24,()=>{}),f=_(t,"ariaHidden",24,()=>{}),v=_(t,"title",24,()=>{}),s=_(t,"desc",24,()=>{}),c=_(t,"class",24,()=>{});var o=za(),p=h(o);k(p,s,H=>{var b=Sa(),E=h(b);m(b),B(()=>S(E,s())),C(H,b)});var w=x(p);k(w,v,H=>{var b=Ma(),E=h(b);m(b),B(()=>S(E,v())),C(H,b)});var D=x(w);m(o),B(()=>{y(o,"viewBox",u()),y(o,"width",n()),y(o,"height",i()),lt(o,c()),y(o,"aria-label",d()),y(o,"aria-hidden",f()),y(D,"fill",l())}),C(r,o)}var Ta=(r,t)=>t(""),Oa=(r,t,a)=>t(e(a)),Ra=z('<button class="text-nowrap hover:underline"> </button>'),Na=(r,t,a)=>t(e(a)),Fa=z('<tr class="hover:bg-slate-100"><td><button class="flex hover:underline items-center gap-1 w-full"><!> </button></td></tr>'),Za=(r,t,a,n)=>t(e(a)[e(n)]),ja=z('<tr><td class="pr-1"><button class="w-full"><p class="flex items-center gap-1 w-full"><!> </p></button></td></tr>'),Ga=z('<tr><th class="text-left"> </th><td class="pl-1"> </td></tr>'),Wa=z('<p> </p> <div class="overflow-auto flex-grow flex flex-col gap-2"><input type="text" placeholder="Search in folder ..." class="p-1 rounded-md input-sm w-full"> <div class="text-sm flex"><button class="text-nowrap hover:underline"></button> <!></div> <div class="overflow-auto flex-grow"><table class="w-full"><tbody><!></tbody></table></div></div>',1),Ua=z("<p>No files found.</p>"),Ja=z("<p>Loading files ...</p>"),qa=z('<div class="flex flex-col gap-2 h-full overflow-hidden"><!></div>');function Ka(r,t){Z(t,!0);const a=At(),n=()=>kt(Vt,"$page",a);let i=A(I({})),l=A(I([])),u=A(!1),d=A(I([])),f=A(!1),v=I({}),s=A(null);G(async()=>{V.retrieve(n().url.searchParams.get("id"))}),G(async()=>{g(u,!0),g(i,I({})),g(l,I([]));let M=c();g(i,I(M)),g(u,!1)}),wt(()=>{V.reset()});const c=()=>{const M={};return V.data.forEach(J=>{const ot=J.path.split(J.path.includes("\\")?"\\":"/");let et=M;ot.forEach((at,yt)=>{yt==ot.length-1?et[at]=J:(et[at]||(et[at]={}),et=et[at])})}),M},o=M=>{g(l,I([...e(l),e(i)])),g(i,I(e(i)[M])),H(M)},p=()=>{e(f)?(g(d,I(e(d).slice(0,e(d).length-1))),g(f,!1)):e(l).length>0&&(g(i,I(e(l).pop())),g(d,I(e(d).slice(0,e(d).length-1))))},w=M=>{const J=e(d).indexOf(M)+1;e(d).length>e(l).length&&M.split(".").length<2&&(g(f,!1),g(d,I(e(d).slice(0,e(d).length-1))));for(let ot=0;e(l).length-J>0;(ot+=1)-1)p()},D=M=>{V.current=M},H=M=>{e(l).length>0?g(d,I([...e(d),M])):g(d,I([]))};let b=jt(()=>()=>e(s)?Object.keys(e(i)).filter(M=>M.toLowerCase().includes(e(s).toLowerCase())):Object.keys(e(i)));var E=qa(),N=h(E);k(N,()=>!e(u),M=>{var J=_t(),ot=Q(J);k(ot,()=>V.data,et=>{var at=Wa(),yt=Q(at),Ut=h(yt);m(yt);var Pt=x(yt,2),St=h(Pt);vt(St);var Mt=x(St,2),zt=h(Mt);zt.__click=[Ta,w],zt.textContent="/";var Jt=x(zt,2);ht(Jt,17,()=>e(d),bt,(st,nt)=>{var it=Ra();it.__click=[Oa,w,nt];var Lt=h(it);m(it),B(()=>S(Lt,`${e(nt)??""}/`)),C(st,it)}),m(Mt);var Tt=x(Mt,2),Ot=h(Tt),Rt=h(Ot),qt=h(Rt);k(qt,()=>e(f)==!1,st=>{var nt=_t(),it=Q(nt);ht(it,17,()=>e(b)(),bt,(Lt,Y)=>{var gt=_t(),xt=Q(gt);k(xt,()=>typeof e(i)[e(Y)]=="object"&&!e(i)[e(Y)].id,Et=>{var K=Fa(),ct=h(K),dt=h(ct);dt.__click=[Na,o,Y];var It=h(dt);re(It,{size:"15"});var Ht=x(It,1,!0);m(dt),m(ct),m(K),B(()=>S(Ht,e(Y))),C(Et,K)},Et=>{var K=ja(),ct=h(K),dt=h(ct);dt.__click=[Za,D,i,Y];var It=h(dt),Ht=h(It);Pa(Ht,{size:"15"});var Kt=x(Ht,1,!0);m(It),m(dt),m(ct),m(K),B(()=>{var Nt,Ft;$(K,`hover:bg-slate-100 ${(((Nt=V.current)==null?void 0:Nt.id)==((Ft=e(i)[e(Y)])==null?void 0:Ft.id)?"bg-slate-100":"")??""}`),S(Kt,e(Y))}),C(Et,K)}),C(Lt,gt)}),C(st,nt)},st=>{var nt=_t(),it=Q(nt);ht(it,17,()=>Object.keys(v),bt,(Lt,Y)=>{var gt=Ga(),xt=h(gt),Et=h(xt);m(xt);var K=x(xt),ct=h(K);m(K),m(gt),B(()=>{S(Et,`${e(Y)??""}:`),S(ct,v[e(Y)])}),C(Lt,gt)}),C(st,nt)}),m(Rt),m(Ot),m(Tt),m(Pt),B(()=>S(Ut,`Images (${V.data.length??""}) :`)),ie(St,()=>e(s),st=>g(s,st)),C(et,at)},et=>{var at=Ua();C(et,at)}),C(M,J)},M=>{var J=Ja();C(M,J)}),m(E),C(r,E),j()}pt(["click"]);var Qa=(r,t)=>g(t,"labels"),Xa=(r,t)=>g(t,"annotations"),Ya=(r,t)=>g(t,"settings"),$a=z('<div class="flex flex-col p-3 border-l bg-bg2 border-border w-[300px] h-full justify-between"><div class="h-[250px]"><!></div> <div class="flex flex-col flex-1 h-full"><div class="w-full h-[2px] bg-slate-500 rounded-full my-2"></div> <span class="flex gap-4"><button>Labels</button> <button>Annotations</button> <button>Settings</button></span> <!> <!> <!></div></div>');function tr(r,t){Z(t,!0);let a=A("labels");G(async()=>{if(V.current){const w=await O.retrieve(V.current.id);W.initItems(P.map),U.initItems(P.map),q.initItems(P.map),w==null||w.forEach(D=>{D.type==="detection"&&W.addLayer(D),D.type==="segmentation"&&U.addLayer(D),D.type==="points"&&q.addLayer(D)})}}),wt(()=>{F.reset(),W.remove(P.map),U.remove(P.map),q.remove(P.map),O.reset()});var n=$a(),i=h(n),l=h(i);Ka(l,{}),m(i);var u=x(i,2),d=x(h(u),2),f=h(d);f.__click=[Qa,a];var v=x(f,2);v.__click=[Xa,a];var s=x(v,2);s.__click=[Ya,a],m(d);var c=x(d,2);k(c,()=>e(a)==="labels",w=>{$t(w,{})});var o=x(c,2);k(o,()=>e(a)==="annotations",w=>{Aa(w,{})});var p=x(o,2);k(p,()=>e(a)==="settings",w=>{Va(w,{})}),m(u),m(n),B(()=>{$(f,`pb-1 ${(e(a)==="labels"?"border-b-2 border-primary":"")??""}`),$(v,`pb-1 ${(e(a)==="annotations"?"border-b-2 border-primary":"")??""}`),$(s,`pb-1 ${(e(a)==="settings"?"border-b-2 border-primary":"")??""}`)}),C(r,n),j()}pt(["click"]);function Zt(r,t){Z(t,!0);const{getMap:a}=Yt("map");let n=null;G(()=>{const i=a();return i&&(n=L.tileLayer(t.url,t.options).addTo(i)),()=>n==null?void 0:n.remove()}),j()}var er=z('<label class="svelte-u9pskg"><input type="radio" name="layers"> </label>'),ar=z('<form class="svelte-u9pskg"></form>');function rr(r,t){const a=[];let n=_(t,"layers",19,()=>["streets","satellite"]),i=_(t,"layer",15);var l=ar();ht(l,21,n,bt,(u,d)=>{var f=er(),v=h(f);vt(v);var s,c=x(v);m(f),B(()=>{s!==(s=e(d))&&(v.value=(v.__value=e(d))==null?"":e(d)),S(c,` ${e(d)??""}`)}),le(a,[],v,()=>(e(d),i()),i),C(u,f)}),m(l),C(r,l)}function or(r,t){Z(t,!0);let a=_(t,"palette",3,"viridis"),n=A(null),i=A(!1);G(()=>{const l=P.map;l&&(e(i)||(ut.initItems(l),V.data.forEach(u=>{ut.addBbox(u,l)}),ut.zoom(l)),tt.showImageBBs||ut.hide(l),V.data.length>0&&g(i,!0))}),G(()=>{const l=P.map;if(l&&V.current){V.zoom(V.current.bbox,l);let u=`${X.api_url}/images/${Bt.current.path}/${V.current.path}/{z}/{x}/{y}.png?stretch=${tt.stretch}&bands=${tt.rgb}&palette=${a()}`;Bt.current.eotdlDatasetId&&(u+=`&eotdlDatasetId=${Bt.current.eotdlDatasetId}`),e(n)?e(n).setUrl(u):g(n,I(L.tileLayer(u,t.options).addTo(l)))}}),wt(()=>{ut.remove(P.map),g(i,!1)}),j()}var nr=z("<!> <!>",1),ir=z('<div class="flex flex-col flex-1 h-full"><!> <div class="flex flex-row flex-1 w-full h-full"><div class="flex-1"><!></div> <div class="w-[300px]"><!></div></div></div> <!>',1);function Ar(r,t){Z(t,!0);const a=At(),n=()=>kt(Vt,"$page",a);let i=A("streets");G(()=>{Bt.retrieveOne(n().url.searchParams.get("id"))});var l=ir(),u=Q(l),d=h(u);La(d,{});var f=x(d,2),v=h(f),s=h(v);Ea(s,{position:[42.0407,3.1],zoom:4,children:(w,D)=>{var H=nr(),b=Q(H);k(b,()=>e(i)=="streets",N=>{Zt(N,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:40,zIndex:1}})},N=>{var M=_t(),J=Q(M);k(J,()=>e(i)=="satellite",ot=>{Zt(ot,{url:"https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}",options:{maxZoom:40,zIndex:1}})},null,!0),C(N,M)});var E=x(b,2);rr(E,{layers:["streets","satellite"],get layer(){return e(i)},set layer(N){g(i,I(N))}}),C(w,H)},$$slots:{default:!0}}),m(v);var c=x(v,2),o=h(c);tr(o,{}),m(c),m(f),m(u);var p=x(u,2);k(p,()=>V.data,w=>{or(w,{options:{maxZoom:20,zIndex:2}})}),C(r,l),j()}export{Ar as component};
